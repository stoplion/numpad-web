!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;(g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).functionPlot=f()}}((function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){var n;return o(e[i][1][r]||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){module.exports=require("./lib/")},{"./lib/":14}],2:[function(require,module,exports){var isObject=require("is-object");module.exports=function(d){if(!isObject(d))throw Error("datum is not an object");return d.hasOwnProperty("graphType")||(d.graphType="interval"),d.hasOwnProperty("sampler")||(d.sampler="interval"!==d.graphType?"builtIn":"interval"),d.hasOwnProperty("fnType")||(d.fnType="linear"),d}},{"is-object":50}],3:[function(require,module,exports){"use strict";var globals=require("./globals"),evalTypeFn={interval:require("./samplers/interval"),builtIn:require("./samplers/builtIn")};function computeEndpoints(chart,d){var range=d.range||[-1/0,1/0],scale=chart.meta.xScale,start,end;return[Math.max(scale.domain()[0],range[0]),Math.min(scale.domain()[1],range[1])]}function evaluate(chart,d){var range=computeEndpoints(chart,d),data,evalFn,nSamples;return data=(0,evalTypeFn[d.sampler])(chart,d,range,d.nSamples||Math.min(globals.MAX_ITERATIONS,globals.DEFAULT_ITERATIONS||2*chart.meta.width)),chart.emit("eval",data,d.index,d.isHelper),data}module.exports=evaluate},{"./globals":4,"./samplers/builtIn":19,"./samplers/interval":20}],4:[function(require,module,exports){"use strict";var d3=window.d3,Globals={COLORS:["steelblue","red","#05b378","orange","#4040e8","yellow","brown","magenta","cyan"].map((function(v){return d3.hsl(v)})),DEFAULT_WIDTH:550,DEFAULT_HEIGHT:350,TIP_X_EPS:1,DEFAULT_ITERATIONS:null};Globals.MAX_ITERATIONS=4*Globals.DEFAULT_WIDTH,module.exports=Globals},{}],5:[function(require,module,exports){"use strict";module.exports={polyline:require("./polyline"),interval:require("./interval"),scatter:require("./scatter")}},{"./interval":6,"./polyline":7,"./scatter":8}],6:[function(require,module,exports){"use strict";var d3=window.d3,evaluate=require("../evaluate"),utils=require("../utils");module.exports=function(chart){var minWidthHeight,xScale=chart.meta.xScale,yScale=chart.meta.yScale;function clampRange(vLo,vHi,gLo,gHi){if(gLo>gHi){var t=gLo;gLo=gHi,gHi=t}var hi=Math.min(vHi,gHi),lo=Math.max(vLo,gLo);return lo>hi?[-minWidthHeight,0]:[lo,hi]}var line=function(points,closed){for(var path="",range=yScale.range(),minY=Math.min.apply(Math,range),maxY=Math.max.apply(Math,range),i=0,length=points.length;i<length;i+=1)if(points[i]){var x=points[i][0],y=points[i][1],yLo=y.lo,yHi=y.hi;closed&&(yLo=Math.min(yLo,0),yHi=Math.max(yHi,0));var moveX=xScale(x.lo)+points.scaledDx/2,viewportY=clampRange(minY,maxY,isFinite(yHi)?yScale(yHi):-1/0,isFinite(yLo)?yScale(yLo):1/0),vLo=viewportY[0],vHi=viewportY[1];path+=" M "+moveX+" "+vLo,path+=" v "+Math.max(vHi-vLo,minWidthHeight)}return path};function plotLine(selection){selection.each((function(d){var el=plotLine.el=d3.select(this),index=d.index,closed=d.closed,evaluatedData=evaluate(chart,d),innerSelection=el.selectAll(":scope > path.line").data(evaluatedData);minWidthHeight=Math.max(evaluatedData[0].scaledDx,1),innerSelection.enter().append("path").attr("class","line line-"+index).attr("fill","none"),innerSelection.attr("stroke-width",minWidthHeight).attr("stroke",utils.color(d,index)).attr("opacity",closed?.5:1).attr("d",(function(d){return line(d,closed)})).attr(d.attr),innerSelection.exit().remove()}))}return plotLine}},{"../evaluate":3,"../utils":22}],7:[function(require,module,exports){"use strict";var d3=window.d3,evaluate=require("../evaluate"),utils=require("../utils"),clamp=require("clamp");module.exports=function(chart){var xScale=chart.meta.xScale,yScale=chart.meta.yScale;function plotLine(selection){selection.each((function(d){var el=plotLine.el=d3.select(this),index=d.index,evaluatedData=evaluate(chart,d),color=utils.color(d,index),innerSelection=el.selectAll(":scope > path.line").data(evaluatedData),yRange=yScale.range(),yMax=yRange[0],yMin=yRange[1],diff=yMax-yMin;function y(d){return clamp(yScale(d[1]),yMin,yMax)}yMax+=1e6*diff,yMin-=1e6*diff,d.skipBoundsCheck&&(yMax=1/0,yMin=-1/0);var line=d3.svg.line().interpolate("linear").x((function(d){return xScale(d[0])})).y(y),area=d3.svg.area().x((function(d){return xScale(d[0])})).y0(yScale(0)).y1(y);innerSelection.enter().append("path").attr("class","line line-"+index).attr("stroke-width",1.5).attr("stroke-linecap","round"),innerSelection.each((function(){var path=d3.select(this),pathD;d.closed?(path.attr("fill",color),path.attr("fill-opacity",.3),pathD=area):(path.attr("fill","none"),pathD=line),path.attr("stroke",color).attr("marker-end",(function(){return"vector"===d.fnType?"url(#"+chart.markerId+")":null})).attr("d",pathD)})).attr(d.attr),innerSelection.exit().remove()}))}return plotLine}},{"../evaluate":3,"../utils":22,clamp:29}],8:[function(require,module,exports){"use strict";var d3=window.d3,evaluate=require("../evaluate"),utils=require("../utils");module.exports=function(chart){var xScale=chart.meta.xScale,yScale=chart.meta.yScale;function scatter(selection){selection.each((function(d){var i,j,index=d.index,color=utils.color(d,index),evaluatedData=evaluate(chart,d),joined=[];for(i=0;i<evaluatedData.length;i+=1)for(j=0;j<evaluatedData[i].length;j+=1)joined.push(evaluatedData[i][j]);var innerSelection=d3.select(this).selectAll(":scope > circle").data(joined);innerSelection.enter().append("circle"),innerSelection.attr("fill",d3.hsl(color.toString()).brighter(1.5)).attr("stroke",color).attr("opacity",.7).attr("r",1).attr("cx",(function(d){return xScale(d[0])})).attr("cy",(function(d){return yScale(d[1])})).attr(d.attr),innerSelection.exit().remove()}))}return scatter}},{"../evaluate":3,"../utils":22}],9:[function(require,module,exports){"use strict";var d3=window.d3;module.exports=function(options){var annotations,xScale=options.owner.meta.xScale,yScale=options.owner.meta.yScale,line=d3.svg.line().x((function(d){return d[0]})).y((function(d){return d[1]}));return annotations=function(parentSelection){parentSelection.each((function(){var current,selection=d3.select(this).selectAll("g.annotations").data((function(d){return d.annotations||[]}));selection.enter().append("g").attr("class","annotations");var yRange=yScale.range(),xRange=xScale.range(),path=selection.selectAll("path").data((function(d){return d.hasOwnProperty("x")?[[[0,yRange[0]],[0,yRange[1]]]]:[[[xRange[0],0],[xRange[1],0]]]}));path.enter().append("path").attr("stroke","#eee").attr("d",line),path.exit().remove();var text=selection.selectAll("text").data((function(d){return[{text:d.text||"",hasX:d.hasOwnProperty("x")}]}));text.enter().append("text").attr("y",(function(d){return d.hasX?3:0})).attr("x",(function(d){return d.hasX?0:3})).attr("dy",(function(d){return d.hasX?5:-5})).attr("text-anchor",(function(d){return d.hasX?"end":""})).attr("transform",(function(d){return d.hasX?"rotate(-90)":""})).text((function(d){return d.text})),text.exit().remove(),selection.attr("transform",(function(d){return d.hasOwnProperty("x")?"translate("+xScale(d.x)+", 0)":"translate(0, "+yScale(d.y)+")"})),selection.exit().remove()}))}}},{}],10:[function(require,module,exports){"use strict";var d3=window.d3,builtInEvaluator=require("./eval").builtIn,polyline=require("../graph-types/polyline"),datumDefaults=require("../datum-defaults");module.exports=function(chart){var derivativeDatum=datumDefaults({isHelper:!0,skipTip:!0,skipBoundsCheck:!0,nSamples:2,graphType:"polyline"}),derivative;function computeLine(d){if(!d.derivative)return[];var x0="number"==typeof d.derivative.x0?d.derivative.x0:1/0;return derivativeDatum.index=d.index,derivativeDatum.scope={m:builtInEvaluator(d.derivative,"fn",{x:x0}),x0:x0,y0:builtInEvaluator(d,"fn",{x:x0})},derivativeDatum.fn="m * (x - x0) + y0",[derivativeDatum]}function checkAutoUpdate(d){var self=this;d.derivative&&d.derivative.updateOnMouseMove&&!d.derivative.$$mouseListener&&(d.derivative.$$mouseListener=function(x0){d.derivative&&(d.derivative.x0=x0),derivative(self)},chart.on("tip:update",d.derivative.$$mouseListener))}return derivative=function(selection){selection.each((function(d){var el=d3.select(this),data=computeLine.call(selection,d);checkAutoUpdate.call(selection,d);var innerSelection=el.selectAll("g.derivative").data(data);innerSelection.enter().append("g").attr("class","derivative"),innerSelection.call(polyline(chart)),innerSelection.selectAll("path").attr("opacity",.5),innerSelection.exit().remove()}))}}},{"../datum-defaults":2,"../graph-types/polyline":7,"./eval":11}],11:[function(require,module,exports){"use strict";var samplers={interval:require("interval-arithmetic-eval"),builtIn:require("built-in-math-eval")},extend=require("extend");function generateEvaluator(samplerName){function doCompile(expression){var compile;if("string"==typeof expression)return(0,samplers[samplerName])(expression);if("function"==typeof expression)return{evaluate:expression};throw Error("expression must be a string or a function")}function compileIfPossible(meta,property){var expression=meta[property],hiddenProperty=samplerName+"_Expression_"+property,hiddenCompiled=samplerName+"_Compiled_"+property;expression!==meta[hiddenProperty]&&(meta[hiddenProperty]=expression,meta[hiddenCompiled]=doCompile(expression))}function getCompiledExpression(meta,property){return meta[samplerName+"_Compiled_"+property]}function evaluate(meta,property,variables){return compileIfPossible(meta,property),getCompiledExpression(meta,property).evaluate(extend({},meta.scope||{},variables))}return evaluate}window.math&&(samplers.builtIn=window.math.compile),module.exports.builtIn=generateEvaluator("builtIn"),module.exports.interval=generateEvaluator("interval")},{"built-in-math-eval":26,extend:31,"interval-arithmetic-eval":34}],12:[function(require,module,exports){"use strict";var d3=window.d3,derivative=require("./derivative"),secant=require("./secant");module.exports=function(chart){function helper(selection){selection.each((function(){var el=d3.select(this);el.call(derivative(chart)),el.call(secant(chart))}))}return helper}},{"./derivative":10,"./secant":13}],13:[function(require,module,exports){"use strict";var d3=window.d3,extend=require("extend"),builtInEvaluator=require("./eval").builtIn,datumDefaults=require("../datum-defaults"),polyline=require("../graph-types/polyline");module.exports=function(chart){var secantDefaults=datumDefaults({isHelper:!0,skipTip:!0,skipBoundsCheck:!0,nSamples:2,graphType:"polyline"}),secant;function computeSlope(scope){scope.m=(scope.y1-scope.y0)/(scope.x1-scope.x0)}function updateLine(d,secant){if(!secant.hasOwnProperty("x0"))throw Error("secant must have the property `x0` defined");secant.scope=secant.scope||{};var x0=secant.x0,x1="number"==typeof secant.x1?secant.x1:1/0;extend(secant.scope,{x0:x0,x1:x1,y0:builtInEvaluator(d,"fn",{x:x0}),y1:builtInEvaluator(d,"fn",{x:x1})}),computeSlope(secant.scope)}function setFn(d,secant){updateLine(d,secant),secant.fn="m * (x - x0) + y0"}function setMouseListener(d,secantObject){var self=this;secantObject.updateOnMouseMove&&!secantObject.$$mouseListener&&(secantObject.$$mouseListener=function(x1){secantObject.x1=x1,updateLine(d,secantObject),secant(self)},chart.on("tip:update",secantObject.$$mouseListener))}function computeLines(d){var self=this,data=[];d.secants=d.secants||[];for(var i=0;i<d.secants.length;i+=1){var secant=d.secants[i]=extend({},secantDefaults,d.secants[i]);secant.index=d.index,secant.fn||(setFn.call(this,d,secant),setMouseListener.call(this,d,secant)),data.push(secant)}return data}return secant=function(selection){selection.each((function(d){var el=d3.select(this),data=computeLines.call(selection,d),innerSelection=el.selectAll("g.secant").data(data);innerSelection.enter().append("g").attr("class","secant"),innerSelection.call(polyline(chart)),innerSelection.selectAll("path").attr("opacity",.5),innerSelection.exit().remove()}))}}},{"../datum-defaults":2,"../graph-types/polyline":7,"./eval":11,extend:31}],14:[function(require,module,exports){"use strict";require("./polyfills");var d3=window.d3,events=require("events"),extend=require("extend"),mousetip=require("./tip"),helpers=require("./helpers/"),annotations=require("./helpers/annotations"),datumDefaults=require("./datum-defaults"),globals,graphTypes,cache=[];module.exports=function(options){var width,height,margin,zoomBehavior,xScale,yScale;(options=options||{}).data=options.data||[];var line=d3.svg.line().x((function(d){return xScale(d[0])})).y((function(d){return yScale(d[1])}));function Chart(){var n=Math.random(),letter=String.fromCharCode(Math.floor(26*n)+97);this.id=options.id=letter+n.toString(16).substr(2),this.linkedGraphs=[this],this.options=options,cache[this.id]=this,this.setUpEventListeners()}Chart.prototype=Object.create(events.prototype),Chart.prototype.build=function(){return this.internalVars(),this.drawGraphWrapper(),this},Chart.prototype.initializeAxes=function(){var integerFormat=d3.format("s"),format=function(scale){return function(d){var decimalFormat=scale.tickFormat(10),isInteger;return d===+d&&d===(0|d)?integerFormat(d):decimalFormat(d)}};function computeYScale(xScale){var xDiff=xScale[1]-xScale[0];return height*xDiff/width}options.xAxis=options.xAxis||{},options.xAxis.type=options.xAxis.type||"linear",options.yAxis=options.yAxis||{},options.yAxis.type=options.yAxis.type||"linear";var xDomain=this.meta.xDomain=function(axis){if(axis.domain)return axis.domain;if("linear"===axis.type){var xLimit=12;return[-6,6]}if("log"===axis.type)return[1,10];throw Error("axis type "+axis.type+" unsupported")}(options.xAxis),yDomain=this.meta.yDomain=function(axis){if(axis.domain)return axis.domain;var yLimit=computeYScale(xDomain);if("linear"===axis.type)return[-yLimit/2,yLimit/2];if("log"===axis.type)return[1,10];throw Error("axis type "+axis.type+" unsupported")}(options.yAxis);if(xDomain[0]>=xDomain[1])throw Error("the pair defining the x-domain is inverted");if(yDomain[0]>=yDomain[1])throw Error("the pair defining the y-domain is inverted");xScale=this.meta.xScale=d3.scale[options.xAxis.type]().domain(xDomain).range(options.xAxis.invert?[width,0]:[0,width]),yScale=this.meta.yScale=d3.scale[options.yAxis.type]().domain(yDomain).range(options.yAxis.invert?[0,height]:[height,0]),this.meta.xAxis=d3.svg.axis().scale(xScale).tickSize(options.grid?-height:0).tickFormat(format(xScale)).orient("bottom"),this.meta.yAxis=d3.svg.axis().scale(yScale).tickSize(options.grid?-width:0).tickFormat(format(yScale)).orient("left")},Chart.prototype.internalVars=function(){this.meta={},margin=this.meta.margin={left:40,right:25,top:20,bottom:30},options.title&&(this.meta.margin.top=40),zoomBehavior=this.meta.zoomBehavior=d3.behavior.zoom(),width=this.meta.width=(options.width||globals.DEFAULT_WIDTH)-margin.left-margin.right,height=this.meta.height=(options.height||globals.DEFAULT_HEIGHT)-margin.top-margin.bottom,this.initializeAxes()},Chart.prototype.drawGraphWrapper=function(){var root=this.root=d3.select(options.target).selectAll("svg").data([options]);this.root.enter=root.enter().append("svg").attr("class","function-plot").attr("font-size",this.getFontSize()),root.attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom),this.buildTitle(),this.buildLegend(),this.buildCanvas(),this.buildClip(),this.buildAxis(),this.buildAxisLabel(),this.draw();var tip=this.tip=mousetip(extend(options.tip,{owner:this}));this.canvas.call(tip),this.buildZoomHelper(),this.setUpPlugins()},Chart.prototype.buildTitle=function(){var selection=this.root.selectAll("text.title").data((function(d){return[d.title].filter(Boolean)}));selection.enter().append("text").attr("class","title").attr("y",margin.top/2).attr("x",margin.left+width/2).attr("font-size",25).attr("text-anchor","middle").attr("alignment-baseline","middle").text(options.title),selection.exit().remove()},Chart.prototype.buildLegend=function(){this.root.enter.append("text").attr("class","top-right-legend").attr("text-anchor","end"),this.root.select(".top-right-legend").attr("y",margin.top/2).attr("x",width+margin.left)},Chart.prototype.buildCanvas=function(){var self=this;this.meta.zoomBehavior.x(xScale).y(yScale).on("zoom",(function onZoom(){self.emit("all:zoom",d3.event.translate,d3.event.scale)}));var canvas=this.canvas=this.root.selectAll(".canvas").data((function(d){return[d]}));this.canvas.enter=canvas.enter().append("g").attr("class","canvas")},Chart.prototype.buildClip=function(){var id=this.id,defs=this.canvas.enter.append("defs");defs.append("clipPath").attr("id","function-plot-clip-"+id).append("rect").attr("class","clip static-clip"),this.canvas.selectAll(".clip").attr("width",width).attr("height",height),this.markerId=this.id+"-marker",defs.append("clipPath").append("marker").attr("id",this.markerId).attr("viewBox","0 -5 10 10").attr("refX",10).attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5L0,0").attr("stroke-width","0px").attr("fill-opacity",1).attr("fill","#777")},Chart.prototype.buildAxis=function(){var canvasEnter=this.canvas.enter;canvasEnter.append("g").attr("class","x axis"),canvasEnter.append("g").attr("class","y axis"),this.canvas.select(".x.axis").attr("transform","translate(0,"+height+")").call(this.meta.xAxis),this.canvas.select(".y.axis").call(this.meta.yAxis)},Chart.prototype.buildAxisLabel=function(){var xLabel,yLabel,canvas=this.canvas;(xLabel=canvas.selectAll("text.x.axis-label").data((function(d){return[d.xAxis.label].filter(Boolean)}))).enter().append("text").attr("class","x axis-label").attr("text-anchor","end"),xLabel.attr("x",width).attr("y",height-6).text((function(d){return d})),xLabel.exit().remove(),(yLabel=canvas.selectAll("text.y.axis-label").data((function(d){return[d.yAxis.label].filter(Boolean)}))).enter().append("text").attr("class","y axis-label").attr("y",6).attr("dy",".75em").attr("text-anchor","end").attr("transform","rotate(-90)"),yLabel.text((function(d){return d})),yLabel.exit().remove()},Chart.prototype.buildContent=function(){var self=this,canvas=this.canvas;canvas.attr("transform","translate("+margin.left+","+margin.top+")").call(zoomBehavior).each((function(){var el=d3.select(this),listeners=["mousedown","touchstart","onwheel"in document?"wheel":"ononmousewheel"in document?"mousewheel":"MozMousePixelScroll"].map((function(d){return d+".zoom"}));function setState(state){listeners.forEach((function(l){state?el.on(l,el["_"+l]):el.on(l,null)}))}el._zoomListenersCache||(listeners.forEach((function(l){el["_"+l]=el.on(l)})),el._zoomListenersCache=!0),setState(!options.disableZoom)}));var content=this.content=canvas.selectAll(":scope > g.content").data((function(d){return[d]}));if(content.enter().append("g").attr("clip-path","url(#function-plot-clip-"+this.id+")").attr("class","content"),"linear"===options.xAxis.type){var yOrigin=content.selectAll(":scope > path.y.origin").data([[[0,yScale.domain()[0]],[0,yScale.domain()[1]]]]);yOrigin.enter().append("path").attr("class","y origin").attr("stroke","black").attr("opacity",.2),yOrigin.attr("d",line)}if("linear"===options.yAxis.type){var xOrigin=content.selectAll(":scope > path.x.origin").data([[[xScale.domain()[0],0],[xScale.domain()[1],0]]]);xOrigin.enter().append("path").attr("class","x origin").attr("stroke","black").attr("opacity",.2),xOrigin.attr("d",line)}content.call(annotations({owner:self}));var graphs=content.selectAll(":scope > g.graph").data((function(d){return d.data.map(datumDefaults)}));graphs.enter().append("g").attr("class","graph"),graphs.each((function(d,index){d.index=index,d3.select(this).call(graphTypes[d.graphType](self)),d3.select(this).call(helpers(self))}))},Chart.prototype.buildZoomHelper=function(){var self=this;this.draggable=this.canvas.enter.append("rect").attr("class","zoom-and-drag").style("fill","none").style("pointer-events","all"),this.canvas.select(".zoom-and-drag").attr("width",width).attr("height",height).on("mouseover",(function(){self.emit("all:mouseover")})).on("mouseout",(function(){self.emit("all:mouseout")})).on("mousemove",(function(){self.emit("all:mousemove")}))},Chart.prototype.setUpPlugins=function(){var plugins=options.plugins||[],self=this;plugins.forEach((function(plugin){plugin(self)}))},Chart.prototype.addLink=function(){for(var i=0;i<arguments.length;i+=1)this.linkedGraphs.push(arguments[i])},Chart.prototype.updateAxes=function(){var instance=this,canvas=this.canvas;canvas.select(".x.axis").call(this.meta.xAxis),canvas.select(".y.axis").call(this.meta.yAxis),canvas.selectAll(".axis path, .axis line").attr("fill","none").attr("stroke","black").attr("shape-rendering","crispedges").attr("opacity",.1)},Chart.prototype.syncOptions=function(){this.options.xAxis.domain=this.meta.xScale.domain(),this.options.yAxis.domain=this.meta.yScale.domain()},Chart.prototype.programmaticZoom=function(xDomain,yDomain){var instance=this;d3.transition().duration(750).tween("zoom",(function(){var ix=d3.interpolate(xScale.domain(),xDomain),iy=d3.interpolate(yScale.domain(),yDomain);return function(t){zoomBehavior.x(xScale.domain(ix(t))).y(yScale.domain(iy(t))),instance.draw()}})).each("end",(function(){instance.emit("programmatic-zoom")}))},Chart.prototype.getFontSize=function(){return Math.max(Math.max(width,height)/50,8)},Chart.prototype.draw=function(){var instance=this;this.emit("before:draw"),this.syncOptions(),this.updateAxes(),this.buildContent(),this.emit("after:draw")},Chart.prototype.setUpEventListeners=function(){var instance=this,events={mousemove:function(coordinates){instance.tip.move(coordinates)},mouseover:function(){instance.tip.show()},mouseout:function(){instance.tip.hide()},zoom:function(translate,scale){zoomBehavior.translate(translate).scale(scale)},"tip:update":function(x,y,index){var meta=instance.root.datum().data[index],title=meta.title||"",format=meta.renderer||function(x,y){return x.toFixed(3)+", "+y.toFixed(3)},text=[];title&&text.push(title),text.push(format(x,y)),instance.root.select(".top-right-legend").attr("fill",globals.COLORS[index]).text(text.join(" "))}},all={mousemove:function(){var mouse=d3.mouse(instance.root.select("rect.zoom-and-drag").node()),coordinates={x:xScale.invert(mouse[0]),y:yScale.invert(mouse[1])};instance.linkedGraphs.forEach((function(graph){graph.emit("before:mousemove",coordinates),graph.emit("mousemove",coordinates)}))},zoom:function(translate,scale){instance.linkedGraphs.forEach((function(graph,i){graph.emit("zoom",translate,scale),graph.draw()})),instance.emit("all:mousemove")}};Object.keys(events).forEach((function(e){instance.on(e,events[e]),!all[e]&&instance.on("all:"+e,(function(){var args=Array.prototype.slice.call(arguments);instance.linkedGraphs.forEach((function(graph){var localArgs=args.slice();localArgs.unshift(e),graph.emit.apply(graph,localArgs)}))}))})),Object.keys(all).forEach((function(e){instance.on("all:"+e,all[e])}))};var instance=cache[options.id];return instance||(instance=new Chart),instance.build()},globals=module.exports.globals=require("./globals"),graphTypes=module.exports.graphTypes=require("./graph-types/"),module.exports.plugins=require("./plugins/"),module.exports.eval=require("./helpers/eval")},{"./datum-defaults":2,"./globals":4,"./graph-types/":5,"./helpers/":12,"./helpers/annotations":9,"./helpers/eval":11,"./plugins/":16,"./polyfills":18,"./tip":21,events:24,extend:31}],15:[function(require,module,exports){var d3=window.d3,extend=require("extend"),pressed=require("key-pressed"),keydown=require("keydown"),integrateSimpson=require("integrate-adaptive-simpson");module.exports=function(options){options=extend({key:"<shift>",toggle:!1},options);var brush=d3.svg.brush(),kd=keydown(options.key),visible=!1,cachedInstance;function wrapper(datum){return function(x){var functionPlot;return window.functionPlot.eval.builtIn(datum,"fn",{x:x})}}function setBrushState(visible){var brushEl;cachedInstance.canvas.selectAll(".definite-integral").style("display",visible?null:"none")}function inner(instance){var oldDisableZoom;cachedInstance=instance,brush.x(instance.meta.xScale).on("brushstart",(function(){d3.event.sourceEvent&&(oldDisableZoom=!!instance.options.disableZoom,instance.options.disableZoom=!0,instance.emit("draw"))})).on("brushend",(function(){if(d3.event.sourceEvent){if(instance.options.disableZoom=oldDisableZoom,!brush.empty()){var a=brush.extent()[0],b=brush.extent()[1];instance.options.data.forEach((function(datum,i){var value=integrateSimpson(wrapper(datum),a,b,options.tol,options.maxdepth);instance.emit("definite-integral",datum,i,value,a,b)}))}instance.draw()}}));var brushEl=instance.canvas.append("g").attr("class","brush definite-integral");brushEl.call(brush).call(brush.event),instance.canvas.selectAll(".brush .extent").attr("stroke","#fff").attr("fill-opacity",.125).attr("shape-rendering","crispEdges"),brushEl.selectAll("rect").attr("height",instance.meta.height),instance.canvas.on("mousemove.definiteIntegral",(function(){options.toggle||inner.visible(pressed(options.key))})),kd.on("pressed",(function(){inner.visible(!options.toggle||!inner.visible())})),inner.visible(!1)}return inner.visible=function(_){return arguments.length?(visible=_,setBrushState(_),inner):visible},inner}},{extend:31,"integrate-adaptive-simpson":33,"key-pressed":52,keydown:53}],16:[function(require,module,exports){module.exports={zoomBox:require("./zoom-box"),definiteIntegral:require("./definite-integral")}},{"./definite-integral":15,"./zoom-box":17}],17:[function(require,module,exports){var d3=window.d3,extend=require("extend"),pressed=require("key-pressed"),keydown=require("keydown");module.exports=function(options){options=extend({key:"<shift>",toggle:!1},options);var brush=d3.svg.brush(),kd=keydown(options.key),cachedInstance,visible=!1;function setBrushState(visible){var brushEl;cachedInstance.canvas.selectAll(".zoom-box").style("display",visible?null:"none")}function inner(instance){var oldDisableZoom,brushEl;cachedInstance=instance,brush.x(instance.meta.xScale).y(instance.meta.yScale).on("brushstart",(function(){d3.event.sourceEvent&&(oldDisableZoom=!!instance.options.disableZoom,instance.options.disableZoom=!0,instance.draw())})).on("brushend",(function(){if(d3.event.sourceEvent){if(instance.options.disableZoom=oldDisableZoom,!brush.empty()){var lo=brush.extent()[0],hi=brush.extent()[1],x=[lo[0],hi[0]],y=[lo[1],hi[1]];instance.programmaticZoom(x,y)}d3.select(this).transition().duration(1).call(brush.clear()).call(brush.event)}})),instance.canvas.append("g").attr("class","brush zoom-box").call(brush).call(brush.event),instance.canvas.selectAll(".brush .extent").attr("stroke","#fff").attr("fill-opacity",.125).attr("shape-rendering","crispEdges"),instance.canvas.on("mousemove.zoombox",(function(){options.toggle||inner.visible(pressed(options.key))})),kd.on("pressed",(function(){inner.visible(!options.toggle||!inner.visible())})),inner.visible(!1)}return inner.visible=function(_){return arguments.length?(visible=_,setBrushState(_),inner):visible},inner}},{extend:31,"key-pressed":52,keydown:53}],18:[function(require,module,exports){!function(doc,proto){try{doc.querySelector(":scope body")}catch(err){["querySelector","querySelectorAll"].forEach((function(method){var native=proto[method];proto[method]=function(selectors){if(/(^|,)\s*:scope/.test(selectors)){var id=this.id;this.id="ID_"+Date.now(),selectors=selectors.replace(/((^|,)\s*):scope/g,"$1#"+this.id);var result=doc[method](selectors);return this.id=id,result}return native.call(this,selectors)}}))}}(window.document,Element.prototype)},{}],19:[function(require,module,exports){"use strict";var clamp=require("clamp"),linspace=require("linspace"),utils=require("../utils"),evaluate=require("../helpers/eval").builtIn;function checkAsymptote(d0,d1,meta,sign,level){if(!level)return{asymptote:!0,d0:d0,d1:d1};var i,n=10,x0=d0[0],x1=d1[0],samples=linspace(x0,x1,n),oldY,oldX;for(i=0;i<n;i+=1){var x=samples[i],y=evaluate(meta,"fn",{x:x});if(i){var deltaY=y-oldY,newSign;if(utils.sgn(deltaY)===sign)return checkAsymptote([oldX,oldY],[x,y],meta,sign,level-1)}oldY=y,oldX=x}return{asymptote:!1,d0:d0,d1:d1}}function split(chart,meta,data){var i,oldSign,deltaX,st=[],sets=[],domain=chart.meta.yScale.domain(),zoomScale=chart.meta.zoomBehavior.scale(),yMin=domain[0],yMax=domain[1];function updateY(d){return d[1]=Math.min(d[1],yMax),d[1]=Math.max(d[1],yMin),d}for(data[0]&&(st.push(data[0]),deltaX=data[1][0]-data[0][0],oldSign=utils.sgn(data[1][1]-data[0][1])),i=1;i<data.length;){var y0=data[i-1][1],y1,deltaY=data[i][1]-y0,newSign=utils.sgn(deltaY);if(oldSign!==newSign&&Math.abs(deltaY/deltaX)>1/zoomScale){var check=checkAsymptote(data[i-1],data[i],meta,newSign,3);check.asymptote&&(st.push(updateY(check.d0)),sets.push(st),st=[updateY(check.d1)])}oldSign=newSign,st.push(data[i]),++i}return st.length&&sets.push(st),sets}function linear(chart,meta,range,n){var allX=utils.space(chart,range,n),yDomain=chart.meta.yScale.domain(),yDomainMargin=yDomain[1]-yDomain[0],yMin=yDomain[0]-1e5*yDomainMargin,yMax=yDomain[1]+1e5*yDomainMargin,data=[],i;for(i=0;i<allX.length;i+=1){var x=allX[i],y=evaluate(meta,"fn",{x:x});utils.isValidNumber(x)&&utils.isValidNumber(y)&&data.push([x,clamp(y,yMin,yMax)])}return data=split(chart,meta,data)}function parametric(chart,meta,range,nSamples){for(var parametricRange=meta.range||[0,2*Math.PI],tCoords=utils.space(chart,parametricRange,nSamples),samples=[],i=0;i<tCoords.length;i+=1){var t=tCoords[i],x=evaluate(meta,"x",{t:t}),y=evaluate(meta,"y",{t:t});samples.push([x,y])}return[samples]}function polar(chart,meta,range,nSamples){for(var polarRange=meta.range||[-Math.PI,Math.PI],thetaSamples=utils.space(chart,polarRange,nSamples),samples=[],i=0;i<thetaSamples.length;i+=1){var theta=thetaSamples[i],r=evaluate(meta,"r",{theta:theta}),x=r*Math.cos(theta),y=r*Math.sin(theta);samples.push([x,y])}return[samples]}function points(chart,meta,range,nSamples){return[meta.points]}function vector(chart,meta,range,nSamples){return meta.offset=meta.offset||[0,0],[[meta.offset,[meta.vector[0]+meta.offset[0],meta.vector[1]+meta.offset[1]]]]}var sampler=function(chart,d,range,nSamples){var fnTypes={parametric:parametric,polar:polar,points:points,vector:vector,linear:linear};if(!(d.fnType in fnTypes))throw Error(d.fnType+" is not supported in the `builtIn` sampler");return fnTypes[d.fnType].apply(null,arguments)};module.exports=sampler},{"../helpers/eval":11,"../utils":22,clamp:29,linspace:54}],20:[function(require,module,exports){"use strict";var intervalArithmeticEval=require("interval-arithmetic-eval"),Interval=intervalArithmeticEval.Interval,evaluate=require("../helpers/eval").interval,utils=require("../utils"),rectEps;function interval1d(chart,meta,range,nSamples){var xCoords=utils.space(chart,range,nSamples),xScale=chart.meta.xScale,yScale=chart.meta.yScale,yMin=yScale.domain()[0],yMax=yScale.domain()[1],samples=[],i;for(i=0;i<xCoords.length-1;i+=1){var x={lo:xCoords[i],hi:xCoords[i+1]},y=evaluate(meta,"fn",{x:x});Interval.isEmpty(y)||Interval.isWhole(y)||samples.push([x,y]),Interval.isWhole(y)&&samples.push(null)}for(i=1;i<samples.length-1;i+=1)if(!samples[i]){var prev=samples[i-1],next=samples[i+1];prev&&next&&!Interval.intervalsOverlap(prev[1],next[1])&&(prev[1].lo>next[1].hi&&(prev[1].hi=Math.max(yMax,prev[1].hi),next[1].lo=Math.min(yMin,next[1].lo)),prev[1].hi<next[1].lo&&(prev[1].lo=Math.min(yMin,prev[1].lo),next[1].hi=Math.max(yMax,next[1].hi)))}return samples.scaledDx=xScale(xCoords[1])-xScale(xCoords[0]),[samples]}function smallRect(x,y){return Interval.width(x)<rectEps}function quadTree(x,y,meta){var sample=evaluate(meta,"fn",{x:x,y:y}),fulfills;if(!Interval.zeroIn(sample))return this;if(smallRect(x,y))return this.push([x,y]),this;var midX=x.lo+(x.hi-x.lo)/2,midY=y.lo+(y.hi-y.lo)/2,east={lo:midX,hi:x.hi},west={lo:x.lo,hi:midX},north={lo:midY,hi:y.hi},south={lo:y.lo,hi:midY};quadTree.call(this,east,north,meta),quadTree.call(this,east,south,meta),quadTree.call(this,west,north,meta),quadTree.call(this,west,south,meta)}function interval2d(chart,meta){var xScale=chart.meta.xScale,xDomain=chart.meta.xScale.domain(),yDomain=chart.meta.yScale.domain(),x={lo:xDomain[0],hi:xDomain[1]},y={lo:yDomain[0],hi:yDomain[1]},samples=[];return rectEps=xScale.invert(1)-xScale.invert(0),quadTree.call(samples,x,y,meta),samples.scaledDx=1,[samples]}intervalArithmeticEval.policies.disableRounding();var sampler=function(chart,d,range,nSamples){var fnTypes={implicit:interval2d,linear:interval1d};if(!fnTypes.hasOwnProperty(d.fnType))throw Error(d.fnType+" is not supported in the `interval` sampler");return fnTypes[d.fnType].apply(null,arguments)};module.exports=sampler},{"../helpers/eval":11,"../utils":22,"interval-arithmetic-eval":34}],21:[function(require,module,exports){"use strict";var d3=window.d3,extend=require("extend"),utils=require("./utils"),clamp=require("clamp"),globals=require("./globals"),builtInEvaluator=require("./helpers/eval").builtIn;module.exports=function(config){config=extend({xLine:!1,yLine:!1,renderer:function(x,y,index){return"("+x.toFixed(3)+", "+y.toFixed(3)+")"},owner:null},config);var MARGIN=20,line=d3.svg.line().x((function(d){return d[0]})).y((function(d){return d[1]}));function lineGenerator(el,data){return el.append("path").datum(data).attr("stroke","grey").attr("stroke-dasharray","5,5").attr("opacity",.5).attr("d",line)}function tip(selection){var innerSelection=selection.selectAll("g.tip").data((function(d){return[d]}));innerSelection.enter().append("g").attr("class","tip").attr("clip-path","url(#function-plot-clip-"+config.owner.id+")"),tip.el=innerSelection.selectAll("g.inner-tip").data((function(d){return[d]})),tip.el.enter().append("g").attr("class","inner-tip").style("display","none").each((function(){var el=d3.select(this);lineGenerator(el,[[0,-config.owner.meta.height-20],[0,config.owner.meta.height+20]]).attr("class","tip-x-line").style("display","none"),lineGenerator(el,[[-config.owner.meta.width-20,0],[config.owner.meta.width+20,0]]).attr("class","tip-y-line").style("display","none"),el.append("circle").attr("r",3),el.append("text").attr("transform","translate(5,-5)")})),selection.selectAll(".tip-x-line").style("display",config.xLine?null:"none"),selection.selectAll(".tip-y-line").style("display",config.yLine?null:"none")}return tip.move=function(coordinates){var i,minDist=1/0,closestIndex=-1,x,y,el=tip.el,inf=1e8,meta=config.owner.meta,data=el.data()[0].data,xScale=meta.xScale,yScale=meta.yScale,width=meta.width,height=meta.height,x0=coordinates.x,y0=coordinates.y;for(i=0;i<data.length;i+=1)if(!data[i].skipTip&&"linear"===data[i].fnType){var range=data[i].range||[-1e8,1e8];if(x0>range[0]-globals.TIP_X_EPS&&x0<range[1]+globals.TIP_X_EPS){try{var candidateY=builtInEvaluator(data[i],"fn",{x:x0})}catch(e){}if(utils.isValidNumber(candidateY)){var tDist=Math.abs(candidateY-y0);tDist<minDist&&(minDist=tDist,closestIndex=i)}}}if(-1!==closestIndex){x=x0,data[closestIndex].range&&(x=Math.max(x,data[closestIndex].range[0]),x=Math.min(x,data[closestIndex].range[1])),y=builtInEvaluator(data[closestIndex],"fn",{x:x}),tip.show(),config.owner.emit("tip:update",x,y,closestIndex);var clampX=clamp(x,xScale.invert(-20),xScale.invert(width+20)),clampY=clamp(y,yScale.invert(height+20),yScale.invert(-20)),color=utils.color(data[closestIndex],closestIndex);el.attr("transform","translate("+xScale(clampX)+","+yScale(clampY)+")"),el.select("circle").attr("fill",color),el.select("text").attr("fill",color).text(config.renderer(x,y,closestIndex))}else tip.hide()},tip.show=function(){this.el.style("display",null)},tip.hide=function(){this.el.style("display","none")},Object.keys(config).forEach((function(option){utils.getterSetter.call(tip,config,option)})),tip}},{"./globals":4,"./helpers/eval":11,"./utils":22,clamp:29,extend:31}],22:[function(require,module,exports){"use strict";var linspace=require("linspace"),logspace=require("logspace"),log10=require("log10"),globals=require("./globals");module.exports={isValidNumber:function(v){return"number"==typeof v&&!isNaN(v)},space:function(chart,range,n){var lo=range[0],hi=range[1];return"log"===chart.options.xAxis.type?logspace(log10(lo),log10(hi),n):linspace(lo,hi,n)},getterSetter:function(config,option){var me=this;this[option]=function(value){return arguments.length?(config[option]=value,me):config[option]}},sgn:function(v){return v<0?-1:v>0?1:0},color:function(data,index){return data.color||globals.COLORS[index]}}},{"./globals":4,linspace:54,log10:56,logspace:57}],23:[function(require,module,exports){"use strict";exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("="),placeHoldersLen;return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function byteLength(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}function toByteArray(b64){for(var tmp,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(_byteLength(b64,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen,i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;return 2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp),1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp),arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]}function encodeChunk(uint8,start,end){for(var tmp,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(tripletToBase64(tmp));return output.join("")}function fromByteArray(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],maxChunkLength=16383,i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,i+16383>len2?len2:i+16383));return 1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")),parts.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},{}],24:[function(require,module,exports){var objectCreate=Object.create||objectCreatePolyfill,objectKeys=Object.keys||objectKeysPolyfill,bind=Function.prototype.bind||functionBindPolyfill;function EventEmitter(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=objectCreate(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10,hasDefineProperty;try{var o={};Object.defineProperty&&Object.defineProperty(o,"x",{value:0}),hasDefineProperty=0===o.x}catch(err){hasDefineProperty=!1}function $getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function emitNone(handler,isFn,self){if(isFn)handler.call(self);else for(var len=handler.length,listeners=arrayClone(handler,len),i=0;i<len;++i)listeners[i].call(self)}function emitOne(handler,isFn,self,arg1){if(isFn)handler.call(self,arg1);else for(var len=handler.length,listeners=arrayClone(handler,len),i=0;i<len;++i)listeners[i].call(self,arg1)}function emitTwo(handler,isFn,self,arg1,arg2){if(isFn)handler.call(self,arg1,arg2);else for(var len=handler.length,listeners=arrayClone(handler,len),i=0;i<len;++i)listeners[i].call(self,arg1,arg2)}function emitThree(handler,isFn,self,arg1,arg2,arg3){if(isFn)handler.call(self,arg1,arg2,arg3);else for(var len=handler.length,listeners=arrayClone(handler,len),i=0;i<len;++i)listeners[i].call(self,arg1,arg2,arg3)}function emitMany(handler,isFn,self,args){if(isFn)handler.apply(self,args);else for(var len=handler.length,listeners=arrayClone(handler,len),i=0;i<len;++i)listeners[i].apply(self,args)}function _addListener(target,type,listener,prepend){var m,events,existing;if("function"!=typeof listener)throw new TypeError('"listener" argument must be a function');if((events=target._events)?(events.newListener&&(target.emit("newListener",type,listener.listener?listener.listener:listener),events=target._events),existing=events[type]):(events=target._events=objectCreate(null),target._eventsCount=0),existing){if("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),!existing.warned&&(m=$getMaxListeners(target))&&m>0&&existing.length>m){existing.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+' "'+String(type)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');w.name="MaxListenersExceededWarning",w.emitter=target,w.type=type,w.count=existing.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",w.name,w.message)}}else existing=events[type]=listener,++target._eventsCount;return target}function onceWrapper(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];this.listener.apply(this.target,args)}}function _onceWrap(target,type,listener){var state={fired:!1,wrapFn:void 0,target:target,type:type,listener:listener},wrapped=bind.call(onceWrapper,state);return wrapped.listener=listener,state.wrapFn=wrapped,wrapped}function _listeners(target,type,unwrap){var events=target._events;if(!events)return[];var evlistener=events[type];return evlistener?"function"==typeof evlistener?unwrap?[evlistener.listener||evlistener]:[evlistener]:unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length):[]}function listenerCount(type){var events=this._events;if(events){var evlistener=events[type];if("function"==typeof evlistener)return 1;if(evlistener)return evlistener.length}return 0}function spliceOne(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1)list[i]=list[k];list.pop()}function arrayClone(arr,n){for(var copy=new Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}function unwrapListeners(arr){for(var ret=new Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}function objectCreatePolyfill(proto){var F=function(){};return F.prototype=proto,new F}function objectKeysPolyfill(obj){var keys=[];for(var k in obj)Object.prototype.hasOwnProperty.call(obj,k)&&keys.push(k);return k}function functionBindPolyfill(context){var fn=this;return function(){return fn.apply(context,arguments)}}hasDefineProperty?Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||arg<0||arg!=arg)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=arg}}):EventEmitter.defaultMaxListeners=defaultMaxListeners,EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if("number"!=typeof n||n<0||isNaN(n))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function emit(type){var er,handler,len,args,i,events,doError="error"===type;if(events=this._events)doError=doError&&null==events.error;else if(!doError)return!1;if(doError){if(arguments.length>1&&(er=arguments[1]),er instanceof Error)throw er;var err=new Error('Unhandled "error" event. ('+er+")");throw err.context=er,err}if(!(handler=events[type]))return!1;var isFn="function"==typeof handler;switch(len=arguments.length){case 1:emitNone(handler,isFn,this);break;case 2:emitOne(handler,isFn,this,arguments[1]);break;case 3:emitTwo(handler,isFn,this,arguments[1],arguments[2]);break;case 4:emitThree(handler,isFn,this,arguments[1],arguments[2],arguments[3]);break;default:for(args=new Array(len-1),i=1;i<len;i++)args[i-1]=arguments[i];emitMany(handler,isFn,this,args)}return!0},EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function once(type,listener){if("function"!=typeof listener)throw new TypeError('"listener" argument must be a function');return this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){if("function"!=typeof listener)throw new TypeError('"listener" argument must be a function');return this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if("function"!=typeof listener)throw new TypeError('"listener" argument must be a function');if(!(events=this._events))return this;if(!(list=events[type]))return this;if(list===listener||list.listener===listener)0==--this._eventsCount?this._events=objectCreate(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;i>=0;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(position<0)return this;0===position?list.shift():spliceOne(list,position),1===list.length&&(events[type]=list[0]),events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;if(!(events=this._events))return this;if(!events.removeListener)return 0===arguments.length?(this._events=objectCreate(null),this._eventsCount=0):events[type]&&(0==--this._eventsCount?this._events=objectCreate(null):delete events[type]),this;if(0===arguments.length){var keys=objectKeys(events),key;for(i=0;i<keys.length;++i)"removeListener"!==(key=keys[i])&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events=objectCreate(null),this._eventsCount=0,this}if("function"==typeof(listeners=events[type]))this.removeListener(type,listeners);else if(listeners)for(i=listeners.length-1;i>=0;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],25:[function(require,module,exports){"use strict";var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;function typedArraySupport(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()}catch(e){return!1}}function createBuffer(length){if(length>2147483647)throw new RangeError('The value "'+length+'" is invalid for option "size"');var buf=new Uint8Array(length);return buf.__proto__=Buffer.prototype,buf}function Buffer(arg,encodingOrOffset,length){if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}function from(value,encodingOrOffset,length){if("string"==typeof value)return fromString(value,encodingOrOffset);if(ArrayBuffer.isView(value))return fromArrayLike(value);if(null==value)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof value);if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer))return fromArrayBuffer(value,encodingOrOffset,length);if("number"==typeof value)throw new TypeError('The "value" argument must not be of type number. Received type number');var valueOf=value.valueOf&&value.valueOf();if(null!=valueOf&&valueOf!==value)return Buffer.from(valueOf,encodingOrOffset,length);var b=fromObject(value);if(b)return b;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof value[Symbol.toPrimitive])return Buffer.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be of type number');if(size<0)throw new RangeError('The value "'+size+'" is invalid for option "size"')}function alloc(size,fill,encoding){return assertSize(size),size<=0?createBuffer(size):void 0!==fill?"string"==typeof encoding?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill):createBuffer(size)}function allocUnsafe(size){return assertSize(size),createBuffer(size<0?0:0|checked(size))}function fromString(string,encoding){if("string"==typeof encoding&&""!==encoding||(encoding="utf8"),!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);var length=0|byteLength(string,encoding),buf=createBuffer(length),actual=buf.write(string,encoding);return actual!==length&&(buf=buf.slice(0,actual)),buf}function fromArrayLike(array){for(var length=array.length<0?0:0|checked(array.length),buf=createBuffer(length),i=0;i<length;i+=1)buf[i]=255&array[i];return buf}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset)throw new RangeError('"offset" is outside of buffer bounds');if(array.byteLength<byteOffset+(length||0))throw new RangeError('"length" is outside of buffer bounds');var buf;return(buf=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length)).__proto__=Buffer.prototype,buf}function fromObject(obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length),buf=createBuffer(len);return 0===buf.length?buf:(obj.copy(buf,0,0,len),buf)}return void 0!==obj.length?"number"!=typeof obj.length||numberIsNaN(obj.length)?createBuffer(0):fromArrayLike(obj):"Buffer"===obj.type&&Array.isArray(obj.data)?fromArrayLike(obj.data):void 0}function checked(length){if(length>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|length}function SlowBuffer(length){return+length!=length&&(length=0),Buffer.alloc(+length)}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer))return string.byteLength;if("string"!=typeof string)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof string);var len=string.length,mustMatch=arguments.length>2&&!0===arguments[2];if(!mustMatch&&0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return mustMatch?-1:utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),numberIsNaN(byteOffset=+byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1,arrLength=arr.length,valLength=val.length,i;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length))>remaining&&(length=remaining):length=remaining;var strLen=string.length;length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1,secondByte,thirdByte,fourthByte,tempCodePoint;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&(tempCodePoint=(31&firstByte)<<6|63&secondByte)>127&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return decodeCodePointsArray(res)}exports.kMaxLength=2147483647,Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer.poolSize=8192,Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)},Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,Buffer.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)},Buffer.isBuffer=function isBuffer(b){return null!=b&&!0===b._isBuffer&&b!==Buffer.prototype},Buffer.compare=function compare(a,b){if(isInstance(a,Uint8Array)&&(a=Buffer.from(a,a.offset,a.byteLength)),isInstance(b,Uint8Array)&&(b=Buffer.from(b,b.offset,b.byteLength)),!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(list,length){if(!Array.isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(isInstance(buf,Uint8Array)&&(buf=Buffer.from(buf)),!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function toString(){var length=this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function inspect(){var str="",max=exports.INSPECT_MAX_BYTES;return str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim(),this.length>max&&(str+=" ... "),"<Buffer "+str+">"},Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)&&(target=Buffer.from(target,target.offset,target.byteLength)),!Buffer.isBuffer(target))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof target);if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function includes(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function write(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset>>>=0,isFinite(length)?(length>>>=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=4096)return String.fromCharCode.apply(String,codePoints);for(var res="",i=0;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=4096));return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,value,offset,4,34028234663852886e22,-34028234663852886e22),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,value,offset,8,17976931348623157e292,-17976931348623157e292),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function slice(start,end){var len=this.length;(start=~~start)<0?(start+=len)<0&&(start=0):start>len&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):end>len&&(end=len),end<start&&(end=start);var newBuf=this.subarray(start,end);return newBuf.__proto__=Buffer.prototype,newBuf},Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return val>=(mul*=128)&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function readInt8(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){var maxBytes;(value=+value,offset>>>=0,byteLength>>>=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){var maxBytes;(value=+value,offset>>>=0,byteLength>>>=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,255,0),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value,offset+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,127,-128),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24,offset+4},Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var len=end-start;if(this===target&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(targetStart,start,end);else if(this===target&&start<targetStart&&targetStart<end)for(var i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart);return len},Buffer.prototype.fill=function fill(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);if(1===val.length){var code=val.charCodeAt(0);("utf8"===encoding&&code<128||"latin1"===encoding)&&(val=code)}}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;var i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding),len=bytes.length;if(0===len)throw new TypeError('The value "'+val+'" is invalid for argument "value"');for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(str){if((str=(str=str.split("=")[0]).trim().replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if((codePoint=string.charCodeAt(i))>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}function utf16leToBytes(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)hi=(c=str.charCodeAt(i))>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}function isInstance(obj,type){return obj instanceof type||null!=obj&&null!=obj.constructor&&null!=obj.constructor.name&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!=obj}},{"base64-js":23,ieee754:32}],26:[function(require,module,exports){"use strict";module.exports=require("./lib/eval")},{"./lib/eval":28}],27:[function(require,module,exports){"use strict";module.exports=function(){var math=Object.create(Math);return math.factory=function(a){if("number"!=typeof a)throw new TypeError("built-in math factory only accepts numbers");return Number(a)},math.add=function(a,b){return a+b},math.sub=function(a,b){return a-b},math.mul=function(a,b){return a*b},math.div=function(a,b){return a/b},math.mod=function(a,b){return a%b},math.factorial=function(a){for(var res=1,i=2;i<=a;i+=1)res*=i;return res},math.nthRoot=function(a,root){var inv=root<0;if(inv&&(root=-root),0===root)throw new Error("Root must be non-zero");if(a<0&&Math.abs(root)%2!=1)throw new Error("Root must be odd when a is negative.");if(0===a)return 0;if(!isFinite(a))return inv?0:a;var x=Math.pow(Math.abs(a),1/root);return x=a<0?-x:x,inv?1/x:x},math.logicalOR=function(a,b){return a||b},math.logicalXOR=function(a,b){return a!=b},math.logicalAND=function(a,b){return a&&b},math.bitwiseOR=function(a,b){return a|b},math.bitwiseXOR=function(a,b){return a^b},math.bitwiseAND=function(a,b){return a&b},math.lessThan=function(a,b){return a<b},math.lessEqualThan=function(a,b){return a<=b},math.greaterThan=function(a,b){return a>b},math.greaterEqualThan=function(a,b){return a>=b},math.equal=function(a,b){return a==b},math.strictlyEqual=function(a,b){return a===b},math.notEqual=function(a,b){return a!=b},math.strictlyNotEqual=function(a,b){return a!==b},math.shiftRight=function(a,b){return a>>b},math.shiftLeft=function(a,b){return a<<b},math.unsignedRightShift=function(a,b){return a>>>b},math.negative=function(a){return-a},math.positive=function(a){return a},math}},{}],28:[function(require,module,exports){"use strict";var CodeGenerator=require("math-codegen"),math=require("./adapter")();function processScope(scope){Object.keys(scope).forEach((function(k){var value=scope[k];scope[k]=math.factory(value)}))}module.exports=function(expression){return(new CodeGenerator).setDefs({$$processScope:processScope}).parse(expression).compile(math)},module.exports.math=math},{"./adapter":27,"math-codegen":58}],29:[function(require,module,exports){function clamp(value,min,max){return min<max?value<min?min:value>max?max:value:value<max?max:value>min?min:value}module.exports=clamp},{}],30:[function(require,module,exports){(function(Buffer){var hasTypedArrays=!1;if("undefined"!=typeof Float64Array){var DOUBLE_VIEW=new Float64Array(1),UINT_VIEW=new Uint32Array(DOUBLE_VIEW.buffer);if(DOUBLE_VIEW[0]=1,hasTypedArrays=!0,1072693248===UINT_VIEW[1]){function toDoubleLE(lo,hi){return UINT_VIEW[0]=lo,UINT_VIEW[1]=hi,DOUBLE_VIEW[0]}function lowUintLE(n){return DOUBLE_VIEW[0]=n,UINT_VIEW[0]}function highUintLE(n){return DOUBLE_VIEW[0]=n,UINT_VIEW[1]}module.exports=function doubleBitsLE(n){return DOUBLE_VIEW[0]=n,[UINT_VIEW[0],UINT_VIEW[1]]},module.exports.pack=toDoubleLE,module.exports.lo=lowUintLE,module.exports.hi=highUintLE}else if(1072693248===UINT_VIEW[0]){function toDoubleBE(lo,hi){return UINT_VIEW[1]=lo,UINT_VIEW[0]=hi,DOUBLE_VIEW[0]}function lowUintBE(n){return DOUBLE_VIEW[0]=n,UINT_VIEW[1]}function highUintBE(n){return DOUBLE_VIEW[0]=n,UINT_VIEW[0]}module.exports=function doubleBitsBE(n){return DOUBLE_VIEW[0]=n,[UINT_VIEW[1],UINT_VIEW[0]]},module.exports.pack=toDoubleBE,module.exports.lo=lowUintBE,module.exports.hi=highUintBE}else hasTypedArrays=!1}if(!hasTypedArrays){var buffer=new Buffer(8);function toDouble(lo,hi){return buffer.writeUInt32LE(lo,0,!0),buffer.writeUInt32LE(hi,4,!0),buffer.readDoubleLE(0,!0)}function lowUint(n){return buffer.writeDoubleLE(n,0,!0),buffer.readUInt32LE(0,!0)}function highUint(n){return buffer.writeDoubleLE(n,0,!0),buffer.readUInt32LE(4,!0)}module.exports=function doubleBits(n){return buffer.writeDoubleLE(n,0,!0),[buffer.readUInt32LE(0,!0),buffer.readUInt32LE(4,!0)]},module.exports.pack=toDouble,module.exports.lo=lowUint,module.exports.hi=highUint}module.exports.sign=function(n){return module.exports.hi(n)>>>31},module.exports.exponent=function(n){var b;return(module.exports.hi(n)<<1>>>21)-1023},module.exports.fraction=function(n){var lo=module.exports.lo(n),hi=module.exports.hi(n),b=1048575&hi;return 2146435072&hi&&(b+=1<<20),[lo,b]},module.exports.denormalized=function(n){var hi;return!(2146435072&module.exports.hi(n))}}).call(this,require("buffer").Buffer)},{buffer:25}],31:[function(require,module,exports){"use strict";var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,defineProperty=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,isArray=function isArray(arr){return"function"==typeof Array.isArray?Array.isArray(arr):"[object Array]"===toStr.call(arr)},isPlainObject=function isPlainObject(obj){if(!obj||"[object Object]"!==toStr.call(obj))return!1;var hasOwnConstructor=hasOwn.call(obj,"constructor"),hasIsPrototypeOf=obj.constructor&&obj.constructor.prototype&&hasOwn.call(obj.constructor.prototype,"isPrototypeOf"),key;if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf)return!1;for(key in obj);return void 0===key||hasOwn.call(obj,key)},setProperty=function setProperty(target,options){defineProperty&&"__proto__"===options.name?defineProperty(target,options.name,{enumerable:!0,configurable:!0,value:options.newValue,writable:!0}):target[options.name]=options.newValue},getProperty=function getProperty(obj,name){if("__proto__"===name){if(!hasOwn.call(obj,name))return;if(gOPD)return gOPD(obj,name).value}return obj[name]};module.exports=function extend(){var options,name,src,copy,copyIsArray,clone,target=arguments[0],i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),(null==target||"object"!=typeof target&&"function"!=typeof target)&&(target={});i<length;++i)if(null!=(options=arguments[i]))for(name in options)src=getProperty(target,name),target!==(copy=getProperty(options,name))&&(deep&&copy&&(isPlainObject(copy)||(copyIsArray=isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&isArray(src)?src:[]):clone=src&&isPlainObject(src)?src:{},setProperty(target,{name:name,newValue:extend(deep,clone,copy)})):void 0!==copy&&setProperty(target,{name:name,newValue:copy}));return target}},{}],32:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},{}],33:[function(require,module,exports){"use strict";function adsimp(f,a,b,fa,fm,fb,V0,tol,maxdepth,depth,state){if(state.nanEncountered)return NaN;var h,f1,f2,sl,sr,s2,m,V1,V2,err;if(f1=f(a+.25*(h=b-a)),f2=f(b-.25*h),isNaN(f1))state.nanEncountered=!0;else{if(!isNaN(f2))return err=((s2=(sl=h*(fa+4*f1+fm)/12)+(sr=h*(fm+4*f2+fb)/12))-V0)/15,depth>maxdepth?(state.maxDepthCount++,s2+err):Math.abs(err)<tol?s2+err:(V1=adsimp(f,a,m=a+.5*h,fa,f1,fm,sl,.5*tol,maxdepth,depth+1,state),isNaN(V1)?(state.nanEncountered=!0,NaN):(V2=adsimp(f,m,b,fm,f2,fb,sr,.5*tol,maxdepth,depth+1,state),isNaN(V2)?(state.nanEncountered=!0,NaN):V1+V2));state.nanEncountered=!0}}function integrate(f,a,b,tol,maxdepth){var state={maxDepthCount:0,nanEncountered:!1};void 0===tol&&(tol=1e-8),void 0===maxdepth&&(maxdepth=20);var fa=f(a),fm=f(.5*(a+b)),fb=f(b),V0,result=adsimp(f,a,b,fa,fm,fb,(fa+4*fm+fb)*(b-a)/6,tol,maxdepth,1,state);return state.maxDepthCount>0&&console&&console.warn&&console.warn("integrate-adaptive-simpson: Warning: maximum recursion depth ("+maxdepth+") reached "+state.maxDepthCount+" times"),state.nanEncountered&&console&&console.warn&&console.warn("integrate-adaptive-simpson: Warning: NaN encountered. Halting early."),result}module.exports=integrate},{}],34:[function(require,module,exports){"use strict";module.exports=require("./lib/eval")},{"./lib/eval":36}],35:[function(require,module,exports){"use strict";module.exports=function(ns){ns.mod=ns.fmod,ns.lessThan=ns.lt,ns.lessEqualThan=ns.leq,ns.greaterThan=ns.gt,ns.greaterEqualThan=ns.geq,ns.strictlyEqual=ns.equal,ns.strictlyNotEqual=ns.notEqual,ns.logicalAND=function(a,b){return a&&b},ns.logicalXOR=function(a,b){return a^b},ns.logicalOR=function(a,b){return a||b}}},{}],36:[function(require,module,exports){"use strict";var CodeGenerator=require("math-codegen"),Interval=require("interval-arithmetic");function processScope(scope){Object.keys(scope).forEach((function(k){var value=scope[k];"number"==typeof value||Array.isArray(value)?scope[k]=Interval.factory(value):"object"==typeof value&&"lo"in value&&"hi"in value&&(scope[k]=Interval.factory(value.lo,value.hi))}))}require("./adapter")(Interval),module.exports=function(expression){return(new CodeGenerator).setDefs({$$processScope:processScope}).parse(expression).compile(Interval)},module.exports.policies=require("./policies")(Interval),module.exports.Interval=Interval},{"./adapter":35,"./policies":37,"interval-arithmetic":38,"math-codegen":58}],37:[function(require,module,exports){"use strict";module.exports=function(Interval){return{disableRounding:function(){Interval.rmath.disable()},enableRounding:function(){Interval.rmath.enable()}}}},{}],38:[function(require,module,exports){"use strict";var extend=require("xtend/mutable");require("./lib/polyfill"),module.exports=require("./lib/interval"),module.exports.rmath=require("./lib/round-math"),module.exports.round=require("./lib/round-math"),extend(module.exports,require("./lib/constants"),require("./lib/operations/relational"),require("./lib/operations/arithmetic"),require("./lib/operations/algebra"),require("./lib/operations/trigonometric"),require("./lib/operations/misc"),require("./lib/operations/utils"))},{"./lib/constants":39,"./lib/interval":40,"./lib/operations/algebra":41,"./lib/operations/arithmetic":42,"./lib/operations/misc":44,"./lib/operations/relational":45,"./lib/operations/trigonometric":46,"./lib/operations/utils":47,"./lib/polyfill":48,"./lib/round-math":49,"xtend/mutable":90}],39:[function(require,module,exports){"use strict";var Interval=require("./interval"),mutate=require("xtend/mutable"),piLow=3.141592653589793,piHigh=3.1415926535897936,constants={};function getter(property,fn){Object.defineProperty(constants,property,{get:function(){return fn()},enumerable:!0})}mutate(constants,{PI_LOW:piLow,PI_HIGH:piHigh,PI_HALF_LOW:piLow/2,PI_HALF_HIGH:piHigh/2,PI_TWICE_LOW:2*piLow,PI_TWICE_HIGH:2*piHigh}),getter("PI",(function(){return Interval(piLow,piHigh)})),getter("PI_HALF",(function(){return Interval(constants.PI_HALF_LOW,constants.PI_HALF_HIGH)})),getter("PI_TWICE",(function(){return Interval(constants.PI_TWICE_LOW,constants.PI_TWICE_HIGH)})),getter("ZERO",(function(){return Interval(0)})),getter("ONE",(function(){return Interval(1)})),getter("WHOLE",(function(){return Interval().setWhole()})),getter("EMPTY",(function(){return Interval().setEmpty()})),module.exports=constants},{"./interval":40,"xtend/mutable":90}],40:[function(require,module,exports){"use strict";var utils=require("./operations/utils"),round=require("./round-math");function Interval(lo,hi){if(!(this instanceof Interval))return new Interval(lo,hi);if(void 0!==lo&&void 0!==hi){if(utils.isInterval(lo)){if(!utils.isSingleton(lo))throw new TypeError("Interval: interval `lo` must be a singleton");lo=lo.lo}if(utils.isInterval(hi)){if(!utils.isSingleton(hi))throw TypeError("Interval: interval `hi` must be a singleton");hi=hi.hi}}else{if(void 0!==lo)return Array.isArray(lo)?Interval(lo[0],lo[1]):Interval(lo,lo);lo=hi=0}this.lo=void 0,this.hi=void 0,this.assign(lo,hi)}module.exports=Interval,Interval.factory=Interval,Interval.prototype.singleton=function(v){return this.set(v,v)},Interval.prototype.bounded=function(lo,hi){return this.set(round.prev(lo),round.next(hi))},Interval.prototype.boundedSingleton=function(v){return this.bounded(v,v)},Interval.prototype.set=function(lo,hi){return this.lo=lo,this.hi=hi,this},Interval.prototype.assign=function(lo,hi){if("number"!=typeof lo||"number"!=typeof hi)throw TypeError("Interval#assign: arguments must be numbers");return isNaN(lo)||isNaN(hi)||lo>hi?this.setEmpty():this.set(lo,hi)},Interval.prototype.setEmpty=function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},Interval.prototype.setWhole=function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},Interval.prototype.open=function(lo,hi){return this.assign(round.safeNext(lo),round.safePrev(hi))},Interval.prototype.halfOpenLeft=function(lo,hi){return this.assign(round.safeNext(lo),hi)},Interval.prototype.halfOpenRight=function(lo,hi){return this.assign(lo,round.safePrev(hi))},Interval.prototype.toArray=function(){return[this.lo,this.hi]},Interval.prototype.clone=function(){return Interval().set(this.lo,this.hi)}},{"./operations/utils":47,"./round-math":49}],41:[function(require,module,exports){"use strict";var isSafeInteger=require("is-safe-integer"),Interval=require("../interval"),rmath=require("../round-math"),utils=require("./utils"),arithmetic=require("./arithmetic"),constants=require("../constants"),algebra={fmod:function(x,y){if(utils.isEmpty(x)||utils.isEmpty(y))return constants.EMPTY;var yb=x.lo<0?y.lo:y.hi,n=x.lo/yb;return n=n<0?Math.ceil(n):Math.floor(n),arithmetic.sub(x,arithmetic.mul(y,Interval(n)))},multiplicativeInverse:function(x){return utils.isEmpty(x)?constants.EMPTY:utils.zeroIn(x)?0!==x.lo?0!==x.hi?constants.WHOLE:Interval(Number.NEGATIVE_INFINITY,rmath.divHi(1,x.lo)):0!==x.hi?Interval(rmath.divLo(1,x.hi),Number.POSITIVE_INFINITY):constants.EMPTY:Interval(rmath.divLo(1,x.hi),rmath.divHi(1,x.lo))},pow:function(x,power){if(utils.isEmpty(x))return constants.EMPTY;if("object"==typeof power){if(!utils.isSingleton(power))return constants.EMPTY;power=power.lo}if(0===power)return 0===x.lo&&0===x.hi?constants.EMPTY:constants.ONE;if(power<0)return algebra.pow(algebra.multiplicativeInverse(x),-power);if(isSafeInteger(power)){if(x.hi<0){var yl=rmath.powLo(-x.hi,power),yh=rmath.powHi(-x.lo,power);return 1&power?Interval(-yh,-yl):Interval(yl,yh)}return x.lo<0?1&power?Interval(-rmath.powLo(-x.lo,power),rmath.powHi(x.hi,power)):Interval(0,rmath.powHi(Math.max(-x.lo,x.hi),power)):Interval(rmath.powLo(x.lo,power),rmath.powHi(x.hi,power))}return console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),constants.EMPTY},sqrt:function(x){return algebra.nthRoot(x,2)},nthRoot:function(x,n){if(utils.isEmpty(x)||n<0)return constants.EMPTY;if("object"==typeof n){if(!utils.isSingleton(n))return constants.EMPTY;n=n.lo}var power=1/n;if(x.hi<0){if(1&isSafeInteger(n)&n){var yl=rmath.powHi(-x.lo,power),yh=rmath.powLo(-x.hi,power);return Interval(-yl,-yh)}return Interval.EMPTY}if(x.lo<0){var yp=rmath.powHi(x.hi,power);if(1&isSafeInteger(n)&n){var yn=-rmath.powHi(-x.lo,power);return Interval(yn,yp)}return Interval(0,yp)}return Interval(rmath.powLo(x.lo,power),rmath.powHi(x.hi,power))}};module.exports=algebra},{"../constants":39,"../interval":40,"../round-math":49,"./arithmetic":42,"./utils":47,"is-safe-integer":51}],42:[function(require,module,exports){"use strict";var Interval=require("../interval"),rmath=require("../round-math"),utils=require("./utils"),constants=require("../constants"),division=require("./division"),arithmetic={add:function(x,y){return Interval(rmath.addLo(x.lo,y.lo),rmath.addHi(x.hi,y.hi))},subtract:function(x,y){return Interval(rmath.subLo(x.lo,y.hi),rmath.subHi(x.hi,y.lo))}};arithmetic.sub=arithmetic.subtract,arithmetic.multiply=function(x,y){if(utils.isEmpty(x)||utils.isEmpty(y))return constants.EMPTY;var xl=x.lo,xh=x.hi,yl=y.lo,yh=y.hi,out=Interval();return xl<0?xh>0?yl<0?yh>0?(out.lo=Math.min(rmath.mulLo(xl,yh),rmath.mulLo(xh,yl)),out.hi=Math.max(rmath.mulHi(xl,yl),rmath.mulHi(xh,yh))):(out.lo=rmath.mulLo(xh,yl),out.hi=rmath.mulHi(xl,yl)):yh>0?(out.lo=rmath.mulLo(xl,yh),out.hi=rmath.mulHi(xh,yh)):(out.lo=0,out.hi=0):yl<0?yh>0?(out.lo=rmath.mulLo(xl,yh),out.hi=rmath.mulHi(xl,yl)):(out.lo=rmath.mulLo(xh,yh),out.hi=rmath.mulHi(xl,yl)):yh>0?(out.lo=rmath.mulLo(xl,yh),out.hi=rmath.mulHi(xh,yl)):(out.lo=0,out.hi=0):xh>0?yl<0?yh>0?(out.lo=rmath.mulLo(xh,yl),out.hi=rmath.mulHi(xh,yh)):(out.lo=rmath.mulLo(xh,yl),out.hi=rmath.mulHi(xl,yh)):yh>0?(out.lo=rmath.mulLo(xl,yl),out.hi=rmath.mulHi(xh,yh)):(out.lo=0,out.hi=0):(out.lo=0,out.hi=0),out},arithmetic.mul=arithmetic.multiply,arithmetic.divide=function(x,y){return utils.isEmpty(x)||utils.isEmpty(y)?constants.EMPTY:utils.zeroIn(y)?0!==y.lo?0!==y.hi?division.zero(x):division.negative(x,y.lo):0!==y.hi?division.positive(x,y.hi):constants.EMPTY:division.nonZero(x,y)},arithmetic.div=arithmetic.divide,arithmetic.positive=function(x){return Interval(x.lo,x.hi)},arithmetic.negative=function(x){return Interval(-x.hi,-x.lo)},module.exports=arithmetic},{"../constants":39,"../interval":40,"../round-math":49,"./division":43,"./utils":47}],43:[function(require,module,exports){"use strict";var Interval=require("../interval"),rmath=require("../round-math"),utils=require("./utils"),constants=require("../constants"),division={nonZero:function(x,y){var xl=x.lo,xh=x.hi,yl=y.lo,yh=y.hi,out=Interval();return xh<0?yh<0?(out.lo=rmath.divLo(xh,yl),out.hi=rmath.divHi(xl,yh)):(out.lo=rmath.divLo(xl,yl),out.hi=rmath.divHi(xh,yh)):xl<0?yh<0?(out.lo=rmath.divLo(xh,yh),out.hi=rmath.divHi(xl,yh)):(out.lo=rmath.divLo(xl,yl),out.hi=rmath.divHi(xh,yl)):yh<0?(out.lo=rmath.divLo(xh,yh),out.hi=rmath.divHi(xl,yl)):(out.lo=rmath.divLo(xl,yh),out.hi=rmath.divHi(xh,yl)),out},positive:function(x,v){return 0===x.lo&&0===x.hi?x:utils.zeroIn(x)?constants.WHOLE:x.hi<0?Interval(Number.NEGATIVE_INFINITY,rmath.divHi(x.hi,v)):Interval(rmath.divLo(x.lo,v),Number.POSITIVE_INFINITY)},negative:function(x,v){return 0===x.lo&&0===x.hi?x:utils.zeroIn(x)?constants.WHOLE:x.hi<0?Interval(rmath.divLo(x.hi,v),Number.POSITIVE_INFINITY):Interval(Number.NEGATIVE_INFINITY,rmath.divHi(x.lo,v))},zero:function(x){return 0===x.lo&&0===x.hi?x:constants.WHOLE}};module.exports=division},{"../constants":39,"../interval":40,"../round-math":49,"./utils":47}],44:[function(require,module,exports){"use strict";var constants=require("../constants"),Interval=require("../interval"),rmath=require("../round-math"),utils=require("./utils"),arithmetic=require("./arithmetic"),misc={exp:function(x){return utils.isEmpty(x)?constants.EMPTY:Interval(rmath.expLo(x.lo),rmath.expHi(x.hi))},log:function(x){if(utils.isEmpty(x))return constants.EMPTY;var l=x.lo<=0?Number.NEGATIVE_INFINITY:rmath.logLo(x.lo);return Interval(l,rmath.logHi(x.hi))}};misc.ln=misc.log,misc.LOG_EXP_10=misc.log(Interval(10,10)),misc.log10=function(x){return utils.isEmpty(x)?constants.EMPTY:arithmetic.div(misc.log(x),misc.LOG_EXP_10)},misc.LOG_EXP_2=misc.log(Interval(2,2)),misc.log2=function(x){return utils.isEmpty(x)?constants.EMPTY:arithmetic.div(misc.log(x),misc.LOG_EXP_2)},misc.hull=function(x,y){var badX=utils.isEmpty(x),badY=utils.isEmpty(y);return badX&&badY?constants.EMPTY:badX?y.clone():badY?x.clone():Interval(Math.min(x.lo,y.lo),Math.max(x.hi,y.hi))},misc.intersection=function(x,y){if(utils.isEmpty(x)||utils.isEmpty(y))return constants.EMPTY;var lo=Math.max(x.lo,y.lo),hi=Math.min(x.hi,y.hi);return lo<=hi?Interval(lo,hi):constants.EMPTY},misc.union=function(x,y){if(!utils.intervalsOverlap(x,y))throw Error("Interval#union: intervals do not overlap");return Interval(Math.min(x.lo,y.lo),Math.max(x.hi,y.hi))},misc.difference=function(x,y){if(utils.isEmpty(x)||utils.isWhole(y))return constants.EMPTY;if(utils.intervalsOverlap(x,y)){if(x.lo<y.lo&&y.hi<x.hi)throw Error("Interval.difference: difference creates multiple intervals");return y.lo<=x.lo&&y.hi===1/0||y.hi>=x.hi&&y.lo===-1/0?constants.EMPTY:y.lo<=x.lo?Interval().halfOpenLeft(y.hi,x.hi):Interval().halfOpenRight(x.lo,y.lo)}return Interval.clone(x)},misc.width=function(x){return utils.isEmpty(x)?0:rmath.subHi(x.hi,x.lo)},misc.wid=misc.width,misc.abs=function(x){return utils.isEmpty(x)?constants.EMPTY:x.lo>=0?Interval.clone(x):x.hi<=0?arithmetic.negative(x):Interval(0,Math.max(-x.lo,x.hi))},misc.max=function(x,y){var badX=utils.isEmpty(x),badY=utils.isEmpty(y);return badX&&badY?constants.EMPTY:badX?y.clone():badY?x.clone():Interval(Math.max(x.lo,y.lo),Math.max(x.hi,y.hi))},misc.min=function(x,y){var badX=utils.isEmpty(x),badY=utils.isEmpty(y);return badX&&badY?constants.EMPTY:badX?y.clone():badY?x.clone():Interval(Math.min(x.lo,y.lo),Math.min(x.hi,y.hi))},misc.clone=function(x){return Interval().set(x.lo,x.hi)},module.exports=misc},{"../constants":39,"../interval":40,"../round-math":49,"./arithmetic":42,"./utils":47}],45:[function(require,module,exports){"use strict";var utils=require("./utils"),relational={equal:function(x,y){return utils.isEmpty(x)?utils.isEmpty(y):!utils.isEmpty(y)&&x.lo===y.lo&&x.hi===y.hi}},EPS=1e-7;function assert(a,message){if(!a)throw new Error(message||"assertion failed")}function assertEps(a,b){if(!isFinite(a))return assert(a===b,"[Infinity] expected "+a+" to be "+b);assert(Math.abs(a-b)<EPS,"expected "+a+" to be close to "+b)}relational.almostEqual=function(x,y){x=Array.isArray(x)?x:x.toArray(),y=Array.isArray(y)?y:y.toArray(),assertEps(x[0],y[0]),assertEps(x[1],y[1])},relational.assertIncludes=function(x,y){relational.almostEqual(x,y),x=Array.isArray(x)?x:x.toArray(),y=Array.isArray(y)?y:y.toArray(),assert(x[0]<=y[0],x[0]+" should be less/equal than "+y[0]),assert(y[1]<=x[1],y[1]+" should be less/equal than "+x[1])},relational.notEqual=function(x,y){return utils.isEmpty(x)?!utils.isEmpty(y):utils.isEmpty(y)||x.hi<y.lo||x.lo>y.hi},relational.lessThan=function(x,y){return!utils.isEmpty(x)&&!utils.isEmpty(y)&&x.hi<y.lo},relational.lt=relational.lessThan,relational.greaterThan=function(x,y){return!utils.isEmpty(x)&&!utils.isEmpty(y)&&x.lo>y.hi},relational.gt=relational.greaterThan,relational.lessEqualThan=function(x,y){return!utils.isEmpty(x)&&!utils.isEmpty(y)&&x.hi<=y.lo},relational.leq=relational.lessEqualThan,relational.greaterEqualThan=function(x,y){return!utils.isEmpty(x)&&!utils.isEmpty(y)&&x.lo>=y.hi},relational.geq=relational.greaterEqualThan,module.exports=relational},{"./utils":47}],46:[function(require,module,exports){"use strict";var constants=require("../constants"),Interval=require("../interval"),rmath=require("../round-math"),utils=require("./utils"),misc=require("./misc"),algebra=require("./algebra"),arithmetic=require("./arithmetic"),trigonometric={};function onlyInfinity(x){return!isFinite(x.lo)&&x.lo===x.hi}function handleNegative(interval){if(interval.lo<0)if(interval.lo===-1/0)interval.lo=0,interval.hi=1/0;else{var n=Math.ceil(-interval.lo/constants.PI_TWICE_LOW);interval.lo+=constants.PI_TWICE_LOW*n,interval.hi+=constants.PI_TWICE_LOW*n}return interval}trigonometric.cos=function(x){var rlo,rhi;if(utils.isEmpty(x)||onlyInfinity(x))return constants.EMPTY;var cache=Interval();cache.set(x.lo,x.hi),handleNegative(cache);var pi2=constants.PI_TWICE,t=algebra.fmod(cache,pi2);if(misc.width(t)>=pi2.lo)return Interval(-1,1);if(t.lo>=constants.PI_HIGH){var cos=trigonometric.cos(arithmetic.sub(t,constants.PI));return arithmetic.negative(cos)}var lo=t.lo,hi=t.hi;return rlo=rmath.cosLo(hi),rhi=rmath.cosHi(lo),hi<=constants.PI_LOW?Interval(rlo,rhi):hi<=pi2.lo?Interval(-1,Math.max(rlo,rhi)):Interval(-1,1)},trigonometric.sin=function(x){return utils.isEmpty(x)||onlyInfinity(x)?constants.EMPTY:trigonometric.cos(arithmetic.sub(x,constants.PI_HALF))},trigonometric.tan=function(x){if(utils.isEmpty(x)||onlyInfinity(x))return constants.EMPTY;var cache=Interval();cache.set(x.lo,x.hi),handleNegative(cache);var pi=constants.PI,t=algebra.fmod(cache,pi);return t.lo>=constants.PI_HALF_LOW&&(t=arithmetic.sub(t,pi)),t.lo<=-constants.PI_HALF_LOW||t.hi>=constants.PI_HALF_LOW?constants.WHOLE:Interval(rmath.tanLo(t.lo),rmath.tanHi(t.hi))},trigonometric.asin=function(x){if(utils.isEmpty(x)||x.hi<-1||x.lo>1)return constants.EMPTY;var lo=x.lo<=-1?-constants.PI_HALF_HIGH:rmath.asinLo(x.lo),hi=x.hi>=1?constants.PI_HALF_HIGH:rmath.asinHi(x.hi);return Interval(lo,hi)},trigonometric.acos=function(x){if(utils.isEmpty(x)||x.hi<-1||x.lo>1)return constants.EMPTY;var lo=x.hi>=1?0:rmath.acosLo(x.hi),hi=x.lo<=-1?constants.PI_HIGH:rmath.acosHi(x.lo);return Interval(lo,hi)},trigonometric.atan=function(x){return utils.isEmpty(x)?constants.EMPTY:Interval(rmath.atanLo(x.lo),rmath.atanHi(x.hi))},trigonometric.sinh=function(x){return utils.isEmpty(x)?constants.EMPTY:Interval(rmath.sinhLo(x.lo),rmath.sinhHi(x.hi))},trigonometric.cosh=function(x){return utils.isEmpty(x)?constants.EMPTY:x.hi<0?Interval(rmath.coshLo(x.hi),rmath.coshHi(x.lo)):x.lo>=0?Interval(rmath.coshLo(x.lo),rmath.coshHi(x.hi)):Interval(1,rmath.coshHi(-x.lo>x.hi?x.lo:x.hi))},trigonometric.tanh=function(x){return utils.isEmpty(x)?constants.EMPTY:Interval(rmath.tanhLo(x.lo),rmath.tanhHi(x.hi))},module.exports=trigonometric},{"../constants":39,"../interval":40,"../round-math":49,"./algebra":41,"./arithmetic":42,"./misc":44,"./utils":47}],47:[function(require,module,exports){"use strict";var utils={isInterval:function(x){return"object"==typeof x&&"number"==typeof x.lo&&"number"==typeof x.hi},isEmpty:function(x){return x.lo>x.hi},isWhole:function(x){return x.lo===-1/0&&x.hi===1/0},isSingleton:function(x){return x.lo===x.hi},zeroIn:function(x){return utils.hasValue(x,0)},hasValue:function(a,value){return!utils.isEmpty(a)&&(a.lo<=value&&value<=a.hi)},hasInterval:function(x,y){return!!utils.isEmpty(x)||!utils.isEmpty(y)&&y.lo<=x.lo&&x.hi<=y.hi},intervalsOverlap:function(x,y){return!utils.isEmpty(x)&&!utils.isEmpty(y)&&(x.lo<=y.lo&&y.lo<=x.hi||y.lo<=x.lo&&x.lo<=y.hi)}};module.exports=utils},{}],48:[function(require,module,exports){"use strict";Math.sinh=Math.sinh||function(x){var y=Math.exp(x);return(y-1/y)/2},Math.cosh=Math.cosh||function(x){var y=Math.exp(x);return(y+1/y)/2},Math.tanh=Math.tanh||function(x){if(x===Number.POSITIVE_INFINITY)return 1;if(x===Number.NEGATIVE_INFINITY)return-1;var y=Math.exp(2*x);return(y-1)/(y+1)}},{}],49:[function(require,module,exports){"use strict";var nextafter=require("nextafter");function identity(v){return v}function prev(v){return v===1/0?v:nextafter(v,-1/0)}function next(v){return v===-1/0?v:nextafter(v,1/0)}var round={safePrev:prev,safeNext:next,prev:prev,next:next};function toInteger(x){return x<0?Math.ceil(x):Math.floor(x)}round.addLo=function(x,y){return this.prev(x+y)},round.addHi=function(x,y){return this.next(x+y)},round.subLo=function(x,y){return this.prev(x-y)},round.subHi=function(x,y){return this.next(x-y)},round.mulLo=function(x,y){return this.prev(x*y)},round.mulHi=function(x,y){return this.next(x*y)},round.divLo=function(x,y){return this.prev(x/y)},round.divHi=function(x,y){return this.next(x/y)},round.intLo=function(x){return toInteger(this.prev(x))},round.intHi=function(x){return toInteger(this.next(x))},round.logLo=function(x){return this.prev(Math.log(x))},round.logHi=function(x){return this.next(Math.log(x))},round.expLo=function(x){return this.prev(Math.exp(x))},round.expHi=function(x){return this.next(Math.exp(x))},round.sinLo=function(x){return this.prev(Math.sin(x))},round.sinHi=function(x){return this.next(Math.sin(x))},round.cosLo=function(x){return this.prev(Math.cos(x))},round.cosHi=function(x){return this.next(Math.cos(x))},round.tanLo=function(x){return this.prev(Math.tan(x))},round.tanHi=function(x){return this.next(Math.tan(x))},round.asinLo=function(x){return this.prev(Math.asin(x))},round.asinHi=function(x){return this.next(Math.asin(x))},round.acosLo=function(x){return this.prev(Math.acos(x))},round.acosHi=function(x){return this.next(Math.acos(x))},round.atanLo=function(x){return this.prev(Math.atan(x))},round.atanHi=function(x){return this.next(Math.atan(x))},round.sinhLo=function(x){return this.prev(Math.sinh(x))},round.sinhHi=function(x){return this.next(Math.sinh(x))},round.coshLo=function(x){return this.prev(Math.cosh(x))},round.coshHi=function(x){return this.next(Math.cosh(x))},round.tanhLo=function(x){return this.prev(Math.tanh(x))},round.tanhHi=function(x){return this.next(Math.tanh(x))},round.powLo=function(x,power){if(power%1!=0)return this.prev(Math.pow(x,power));var y=1&power?x:1;for(power>>=1;power>0;)x=round.mulLo(x,x),1&power&&(y=round.mulLo(x,y)),power>>=1;return y},round.powHi=function(x,power){if(power%1!=0)return this.next(Math.pow(x,power));var y=1&power?x:1;for(power>>=1;power>0;)x=round.mulHi(x,x),1&power&&(y=round.mulHi(x,y)),power>>=1;return y},round.sqrtLo=function(x){return this.prev(Math.sqrt(x))},round.sqrtHi=function(x){return this.next(Math.sqrt(x))},round.disable=function(){this.next=this.prev=identity},round.enable=function(){this.next=next,this.prev=prev},module.exports=round},{nextafter:87}],50:[function(require,module,exports){"use strict";module.exports=function isObject(x){return"object"==typeof x&&null!==x}},{}],51:[function(require,module,exports){"use strict";var MAX_SAFE_INTEGER=require("max-safe-integer");module.exports=Number.isSafeInteger||function(val){return"number"==typeof val&&val==val&&val!==1/0&&val!==-1/0&&parseInt(val,10)===val&&Math.abs(val)<=MAX_SAFE_INTEGER}},{"max-safe-integer":71}],52:[function(require,module,exports){(function(process){var keys=require("vkey"),list=Object.keys(keys),down={};function pressed(key){return key?down[key]:down}function reset(){list.forEach((function(code){down[keys[code]]=!1}))}function keyup(e){down[keys[e.keyCode]]=!1}function keydown(e){down[keys[e.keyCode]]=!0}reset(),module.exports=pressed,process.browser&&(window.addEventListener("keydown",keydown,!1),window.addEventListener("keyup",keyup,!1),window.addEventListener("blur",reset,!1))}).call(this,require("_process"))},{_process:88,vkey:89}],53:[function(require,module,exports){var Emitter=require("events").EventEmitter,vkey=require("vkey");module.exports=function(keys,el){"string"==typeof keys&&(keys=[keys]),el||(el=window);var emitter=new Emitter;function clearPressed(){emitter.pressed={}}return emitter.pressed={},el.addEventListener("blur",clearPressed),el.addEventListener("focus",clearPressed),el.addEventListener("keydown",(function(ev){var key=vkey[ev.keyCode];emitter.pressed[key]=!0;var allPressed=!0;keys.forEach((function(k){emitter.pressed[k]||(allPressed=!1)})),allPressed&&(emitter.emit("pressed",emitter.pressed),clearPressed())})),el.addEventListener("keyup",(function(ev){delete emitter.pressed[vkey[ev.keyCode]]})),emitter}},{events:24,vkey:89}],54:[function(require,module,exports){var range=require("lodash.range");module.exports=function linspace(a,b,n){var every,ranged=range(a,b,(b-a)/(n-1));return ranged.length==n?ranged:ranged.concat(b)}},{"lodash.range":55}],55:[function(require,module,exports){var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=17976931348623157e292,NAN=NaN,funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,freeParseInt=parseInt;function baseProperty(key){return function(object){return null==object?void 0:object[key]}}var objectProto,objectToString=Object.prototype.toString,nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,start+=step;return result}function createRange(fromRight){return function(start,end,step){return step&&"number"!=typeof step&&isIterateeCall(start,end,step)&&(end=step=void 0),start=toFinite(start),void 0===end?(end=start,start=0):end=toFinite(end),baseRange(start,end,step=void 0===step?start<end?1:-1:toFinite(step),fromRight)}}var getLength=baseProperty("length");function isIndex(value,length){return!!(length=null==length?9007199254740991:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}function eq(value,other){return value===other||value!=value&&other!=other}function isArrayLike(value){return null!=value&&isLength(getLength(value))&&!isFunction(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toFinite(value){return value?(value=toNumber(value))===1/0||value===-1/0?(value<0?-1:1)*MAX_INTEGER:value==value?value:0:0===value?value:0;var sign}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NaN;if(isObject(value)){var other=isFunction(value.valueOf)?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value}var range=createRange();module.exports=range},{}],56:[function(require,module,exports){"use strict";module.exports=Math.log10||function(x){return Math.log(x)*Math.LOG10E}},{}],57:[function(require,module,exports){var linspace=require("linspace");module.exports=function logspace(a,b,n){return linspace(a,b,n).map((function(x){return Math.pow(10,x)}))}},{linspace:54}],58:[function(require,module,exports){"use strict";module.exports=require("./lib/CodeGenerator")},{"./lib/CodeGenerator":59}],59:[function(require,module,exports){"use strict";var Parser=require("mr-parser").Parser,Interpreter=require("./Interpreter"),extend=require("extend");function CodeGenerator(options,defs){this.statements=[],this.defs=defs||{},this.interpreter=new Interpreter(this,options)}CodeGenerator.prototype.setDefs=function(defs){return this.defs=extend(this.defs,defs),this},CodeGenerator.prototype.compile=function(namespace){if(!namespace||"object"!=typeof namespace&&"function"!=typeof namespace)throw TypeError("namespace must be an object");if("function"!=typeof namespace.factory)throw TypeError("namespace.factory must be a function");this.defs.ns=namespace,this.defs.$$mathCodegen={getProperty:function(symbol,scope,ns){if(symbol in scope)return scope[symbol];if(symbol in ns)return ns[symbol];throw SyntaxError('symbol "'+symbol+'" is undefined')},functionProxy:function(fn,name){if("function"!=typeof fn)throw SyntaxError('symbol "'+name+'" must be a function');return fn}},this.defs.$$processScope=this.defs.$$processScope||function(){};var defsCode=Object.keys(this.defs).map((function(name){return"var "+name+' = defs["'+name+'"]'}));if(!this.statements.length)throw Error("there are no statements saved in this generator, make sure you parse an expression before compiling it");this.statements[this.statements.length-1]="return "+this.statements[this.statements.length-1];var code=this.statements.join(";"),factoryCode=defsCode.join("\n")+"\n"+["return {","  eval: function (scope) {","    scope = scope || {}","    $$processScope(scope)","    "+code,"  },","  code: '"+code+"'","}"].join("\n"),factory;return new Function("defs",factoryCode)(this.defs)},CodeGenerator.prototype.parse=function(code){var self=this,program=(new Parser).parse(code);return this.statements=program.blocks.map((function(statement){return self.interpreter.next(statement)})),this},module.exports=CodeGenerator},{"./Interpreter":60,extend:31,"mr-parser":72}],60:[function(require,module,exports){"use strict";var extend=require("extend"),types={ArrayNode:require("./node/ArrayNode"),AssignmentNode:require("./node/AssignmentNode"),ConditionalNode:require("./node/ConditionalNode"),ConstantNode:require("./node/ConstantNode"),FunctionNode:require("./node/FunctionNode"),OperatorNode:require("./node/OperatorNode"),SymbolNode:require("./node/SymbolNode"),UnaryNode:require("./node/UnaryNode")},Interpreter=function(owner,options){this.owner=owner,this.options=extend({factory:"ns.factory",raw:!1,rawArrayExpressionElements:!0,rawCallExpressionElements:!1},options)};extend(Interpreter.prototype,types),Interpreter.prototype.next=function(node){if(!(node.type in this))throw new TypeError("the node type "+node.type+" is not implemented");return this[node.type](node)},Interpreter.prototype.rawify=function(test,fn){var oldRaw=this.options.raw;test&&(this.options.raw=!0),fn(),test&&(this.options.raw=oldRaw)},module.exports=Interpreter},{"./node/ArrayNode":63,"./node/AssignmentNode":64,"./node/ConditionalNode":65,"./node/ConstantNode":66,"./node/FunctionNode":67,"./node/OperatorNode":68,"./node/SymbolNode":69,"./node/UnaryNode":70,extend:31}],61:[function(require,module,exports){"use strict";module.exports={"+":"add","-":"sub","*":"mul","/":"div","^":"pow","%":"mod","!":"factorial","|":"bitwiseOR","^|":"bitwiseXOR","&":"bitwiseAND","||":"logicalOR",xor:"logicalXOR","&&":"logicalAND","<":"lessThan",">":"greaterThan","<=":"lessEqualThan",">=":"greaterEqualThan","===":"strictlyEqual","==":"equal","!==":"strictlyNotEqual","!=":"notEqual",">>":"shiftRight","<<":"shiftLeft",">>>":"unsignedRightShift"}},{}],62:[function(require,module,exports){"use strict";module.exports={"+":"positive","-":"negative","~":"oneComplement"}},{}],63:[function(require,module,exports){"use strict";module.exports=function(node){var self=this,arr=[];this.rawify(this.options.rawArrayExpressionElements,(function(){arr=node.nodes.map((function(el){return self.next(el)}))}));var arrString="["+arr.join(",")+"]";return this.options.raw?arrString:this.options.factory+"("+arrString+")"}},{}],64:[function(require,module,exports){"use strict";module.exports=function(node){return'scope["'+node.name+'"] = '+this.next(node.expr)}},{}],65:[function(require,module,exports){"use strict";module.exports=function(node){var condition,trueExpr,falseExpr;return"("+("!!("+this.next(node.condition)+")")+" ? ("+this.next(node.trueExpr)+") : ("+this.next(node.falseExpr)+") )"}},{}],66:[function(require,module,exports){"use strict";module.exports=function(node){return this.options.raw?node.value:this.options.factory+"("+node.value+")"}},{}],67:[function(require,module,exports){"use strict";var SymbolNode=require("mr-parser").nodeTypes.SymbolNode,functionProxy=function(node){return"$$mathCodegen.functionProxy("+this.next(new SymbolNode(node.name))+', "'+node.name+'")'};module.exports=function(node){var self=this,method=functionProxy.call(this,node),args=[];return this.rawify(this.options.rawCallExpressionElements,(function(){args=node.args.map((function(arg){return self.next(arg)}))})),method+"("+args.join(", ")+")"},module.exports.functionProxy=functionProxy},{"mr-parser":72}],68:[function(require,module,exports){"use strict";var Operators=require("../misc/Operators");module.exports=function(node){if(this.options.raw)return["("+this.next(node.args[0]),node.op,this.next(node.args[1])+")"].join(" ");var namedOperator=Operators[node.op];if(!namedOperator)throw TypeError("unidentified operator");return this.FunctionNode({name:namedOperator,args:node.args})}},{"../misc/Operators":61}],69:[function(require,module,exports){"use strict";module.exports=function(node){var id;return'$$mathCodegen.getProperty("'+node.name+'", scope, ns)'}},{}],70:[function(require,module,exports){"use strict";var UnaryOperators=require("../misc/UnaryOperators");module.exports=function(node){if(this.options.raw)return node.op+this.next(node.argument);if(!(node.op in UnaryOperators))throw new SyntaxError(node.op+" not implemented");var namedOperator=UnaryOperators[node.op];return this.FunctionNode({name:namedOperator,args:[node.argument]})}},{"../misc/UnaryOperators":62}],71:[function(require,module,exports){"use strict";module.exports=9007199254740991},{}],72:[function(require,module,exports){"use strict";module.exports.Lexer=require("./lib/Lexer"),module.exports.Parser=require("./lib/Parser"),module.exports.nodeTypes=require("./lib/node/")},{"./lib/Lexer":73,"./lib/Parser":74,"./lib/node/":85}],73:[function(require,module,exports){var tokenType=require("./token-type"),ESCAPES={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},DELIMITERS={",":!0,"(":!0,")":!0,"[":!0,"]":!0,";":!0,"~":!0,"!":!0,"+":!0,"-":!0,"*":!0,"/":!0,"%":!0,"^":!0,"**":!0,"|":!0,"&":!0,"^|":!0,"=":!0,":":!0,"?":!0,"||":!0,"&&":!0,xor:!0,"==":!0,"!=":!0,"===":!0,"!==":!0,"<":!0,">":!0,">=":!0,"<=":!0,">>>":!0,"<<":!0,">>":!0};function isDigit(c){return c>="0"&&c<="9"}function isIdentifier(c){return c>="a"&&c<="z"||c>="A"&&c<="Z"||"$"===c||"_"===c}function isWhitespace(c){return" "===c||"\r"===c||"\t"===c||"\n"===c||"\v"===c||" "===c}function isDelimiter(str){return DELIMITERS[str]}function isQuote(c){return"'"===c||'"'===c}function Lexer(){}Lexer.prototype.throwError=function(message,index){index=void 0===index?this.index:index;var error=new Error(message+" at index "+index);throw error.index=index,error.description=message,error},Lexer.prototype.lex=function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){for(;isWhitespace(this.peek());)this.consume();var c=this.peek(),c2=c+this.peek(1),c3=c2+this.peek(2);isDelimiter(c3)?(this.tokens.push({type:tokenType.DELIMITER,value:c3}),this.consume(),this.consume(),this.consume()):isDelimiter(c2)?(this.tokens.push({type:tokenType.DELIMITER,value:c2}),this.consume(),this.consume()):isDelimiter(c)?(this.tokens.push({type:tokenType.DELIMITER,value:c}),this.consume()):isDigit(c)||"."===c&&isDigit(this.peek(1))?this.tokens.push({type:tokenType.NUMBER,value:this.readNumber()}):isQuote(c)?this.tokens.push({type:tokenType.STRING,value:this.readString()}):isIdentifier(c)?this.tokens.push({type:tokenType.SYMBOL,value:this.readIdentifier()}):this.throwError("unexpected character "+c)}return this.tokens.push({type:tokenType.EOF}),this.tokens},Lexer.prototype.peek=function(nth){if(nth=nth||0,!(this.index+nth>=this.text.length))return this.text.charAt(this.index+nth)},Lexer.prototype.consume=function(){var current=this.peek();return this.index+=1,current},Lexer.prototype.readNumber=function(){var number="";if("."===this.peek())number+=this.consume(),isDigit(this.peek())||this.throwError("number expected");else{for(;isDigit(this.peek());)number+=this.consume();"."===this.peek()&&(number+=this.consume())}for(;isDigit(this.peek());)number+=this.consume();if("e"===this.peek()||"E"===this.peek())for(number+=this.consume(),isDigit(this.peek())||"+"===this.peek()||"-"===this.peek()||this.throwError(),"+"!==this.peek()&&"-"!==this.peek()||(number+=this.consume()),isDigit(this.peek())||this.throwError("number expected");isDigit(this.peek());)number+=this.consume();return number},Lexer.prototype.readIdentifier=function(){for(var text="";isIdentifier(this.peek())||isDigit(this.peek());)text+=this.consume();return text},Lexer.prototype.readString=function(){for(var quote=this.consume(),string="",escape;;){var c=this.consume();if(c||this.throwError("string is not closed"),escape){if("u"===c){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("invalid unicode escape"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var replacement=ESCAPES[c];string+=replacement||c}escape=!1}else{if(c===quote)break;"\\"===c?escape=!0:string+=c}}return string},module.exports=Lexer},{"./token-type":86}],74:[function(require,module,exports){var tokenType=require("./token-type"),Lexer=require("./Lexer"),ConstantNode=require("./node/ConstantNode"),OperatorNode=require("./node/OperatorNode"),UnaryNode=require("./node/UnaryNode"),SymbolNode=require("./node/SymbolNode"),FunctionNode=require("./node/FunctionNode"),ArrayNode=require("./node/ArrayNode"),ConditionalNode=require("./node/ConditionalNode"),AssignmentNode=require("./node/AssignmentNode"),BlockNode=require("./node/BlockNode");function Parser(){this.lexer=new Lexer,this.tokens=null}Parser.prototype.current=function(){return this.tokens[0]},Parser.prototype.next=function(){return this.tokens[1]},Parser.prototype.peek=function(){if(this.tokens.length)for(var first=this.tokens[0],i=0;i<arguments.length;i+=1)if(first.value===arguments[i])return!0},Parser.prototype.consume=function(e){return this.tokens.shift()},Parser.prototype.expect=function(e){if(!this.peek(e))throw Error("expected "+e);return this.consume()},Parser.prototype.isEOF=function(){return this.current().type===tokenType.EOF},Parser.prototype.parse=function(text){return this.tokens=this.lexer.lex(text),this.program()},Parser.prototype.program=function(){for(var blocks=[];!this.isEOF();)blocks.push(this.assignment()),this.peek(";")&&this.consume();return this.end(),new BlockNode(blocks)},Parser.prototype.assignment=function(){var left=this.ternary();return left instanceof SymbolNode&&this.peek("=")?(this.consume(),new AssignmentNode(left.name,this.assignment())):left},Parser.prototype.ternary=function(){var predicate=this.logicalOR();if(this.peek("?")){this.consume();var truthy=this.ternary();this.expect(":");var falsy=this.ternary();return new ConditionalNode(predicate,truthy,falsy)}return predicate},Parser.prototype.logicalOR=function(){var left=this.logicalXOR();if(this.peek("||")){var op=this.consume(),right=this.logicalOR();return new OperatorNode(op.value,[left,right])}return left},Parser.prototype.logicalXOR=function(){var left=this.logicalAND();if("xor"===this.current().value){var op=this.consume(),right=this.logicalXOR();return new OperatorNode(op.value,[left,right])}return left},Parser.prototype.logicalAND=function(){var left=this.bitwiseOR();if(this.peek("&&")){var op=this.consume(),right=this.logicalAND();return new OperatorNode(op.value,[left,right])}return left},Parser.prototype.bitwiseOR=function(){var left=this.bitwiseXOR();if(this.peek("|")){var op=this.consume(),right=this.bitwiseOR();return new OperatorNode(op.value,[left,right])}return left},Parser.prototype.bitwiseXOR=function(){var left=this.bitwiseAND();if(this.peek("^|")){var op=this.consume(),right=this.bitwiseXOR();return new OperatorNode(op.value,[left,right])}return left},Parser.prototype.bitwiseAND=function(){var left=this.relational();if(this.peek("&")){var op=this.consume(),right=this.bitwiseAND();return new OperatorNode(op.value,[left,right])}return left},Parser.prototype.relational=function(){var left=this.shift();if(this.peek("==","===","!=","!==",">=","<=",">","<")){var op=this.consume(),right=this.shift();return new OperatorNode(op.value,[left,right])}return left},Parser.prototype.shift=function(){var left=this.additive();if(this.peek(">>","<<",">>>")){var op=this.consume(),right=this.shift();return new OperatorNode(op.value,[left,right])}return left},Parser.prototype.additive=function(){for(var left=this.multiplicative();this.peek("+","-");){var op=this.consume();left=new OperatorNode(op.value,[left,this.multiplicative()])}return left},Parser.prototype.multiplicative=function(){for(var op,right,left=this.unary();this.peek("*","/","%");)op=this.consume(),left=new OperatorNode(op.value,[left,this.unary()]);return this.current().type===tokenType.SYMBOL||this.peek("(")||!(left.type instanceof ConstantNode)&&this.current().type===tokenType.NUMBER?(right=this.multiplicative(),new OperatorNode("*",[left,right])):left},Parser.prototype.unary=function(){if(this.peek("-","+","~")){var op=this.consume(),right=this.unary();return new UnaryNode(op.value,right)}return this.pow()},Parser.prototype.pow=function(){var left=this.factorial();if(this.peek("^","**")){var op=this.consume(),right=this.unary();return new OperatorNode(op.value,[left,right])}return left},Parser.prototype.factorial=function(){var left=this.symbol();if(this.peek("!")){var op=this.consume();return new OperatorNode(op.value,[left])}return left},Parser.prototype.symbol=function(){var current;if(this.current().type===tokenType.SYMBOL){var symbol=this.consume(),node;return this.functionCall(symbol)}return this.string()},Parser.prototype.functionCall=function(symbolToken){var name=symbolToken.value;if(this.peek("(")){this.consume();for(var params=[];!this.peek(")")&&!this.isEOF();)params.push(this.assignment()),this.peek(",")&&this.consume();return this.expect(")"),new FunctionNode(name,params)}return new SymbolNode(name)},Parser.prototype.string=function(){return this.current().type===tokenType.STRING?new ConstantNode(this.consume().value,"string"):this.array()},Parser.prototype.array=function(){if(this.peek("[")){this.consume();for(var params=[];!this.peek("]")&&!this.isEOF();)params.push(this.assignment()),this.peek(",")&&this.consume();return this.expect("]"),new ArrayNode(params)}return this.number()},Parser.prototype.number=function(){var token;return this.current().type===tokenType.NUMBER?new ConstantNode(this.consume().value,"number"):this.parentheses()},Parser.prototype.parentheses=function(){var token;if("("===this.current().value){this.consume();var left=this.assignment();return this.expect(")"),left}return this.end()},Parser.prototype.end=function(){var token;if(this.current().type!==tokenType.EOF)throw Error("unexpected end of expression")},module.exports=Parser},{"./Lexer":73,"./node/ArrayNode":75,"./node/AssignmentNode":76,"./node/BlockNode":77,"./node/ConditionalNode":78,"./node/ConstantNode":79,"./node/FunctionNode":80,"./node/OperatorNode":82,"./node/SymbolNode":83,"./node/UnaryNode":84,"./token-type":86}],75:[function(require,module,exports){var Node=require("./Node");function ArrayNode(nodes){this.nodes=nodes}ArrayNode.prototype=Object.create(Node.prototype),ArrayNode.prototype.type="ArrayNode",module.exports=ArrayNode},{"./Node":81}],76:[function(require,module,exports){var Node=require("./Node");function AssignmentNode(name,expr){this.name=name,this.expr=expr}AssignmentNode.prototype=Object.create(Node.prototype),AssignmentNode.prototype.type="AssignmentNode",module.exports=AssignmentNode},{"./Node":81}],77:[function(require,module,exports){var Node=require("./Node");function BlockNode(blocks){this.blocks=blocks}BlockNode.prototype=Object.create(Node.prototype),BlockNode.prototype.type="BlockNode",module.exports=BlockNode},{"./Node":81}],78:[function(require,module,exports){var Node=require("./Node");function ConditionalNode(predicate,truthy,falsy){this.condition=predicate,this.trueExpr=truthy,this.falseExpr=falsy}ConditionalNode.prototype=Object.create(Node.prototype),ConditionalNode.prototype.type="ConditionalNode",module.exports=ConditionalNode},{"./Node":81}],79:[function(require,module,exports){var Node=require("./Node"),SUPPORTED_TYPES={number:!0,string:!0,boolean:!0,undefined:!0,null:!0};function ConstantNode(value,type){if(!SUPPORTED_TYPES[type])throw Error("unsupported type '"+type+"'");this.value=value,this.valueType=type}ConstantNode.prototype=Object.create(Node.prototype),ConstantNode.prototype.type="ConstantNode",module.exports=ConstantNode},{"./Node":81}],80:[function(require,module,exports){var Node=require("./Node");function FunctionNode(name,args){this.name=name,this.args=args}FunctionNode.prototype=Object.create(Node.prototype),FunctionNode.prototype.type="FunctionNode",module.exports=FunctionNode},{"./Node":81}],81:[function(require,module,exports){function Node(){}Node.prototype.type="Node",module.exports=Node},{}],82:[function(require,module,exports){var Node=require("./Node");function OperatorNode(op,args){this.op=op,this.args=args||[]}OperatorNode.prototype=Object.create(Node.prototype),OperatorNode.prototype.type="OperatorNode",module.exports=OperatorNode},{"./Node":81}],83:[function(require,module,exports){var Node=require("./Node");function SymbolNode(name){this.name=name}SymbolNode.prototype=Object.create(Node.prototype),SymbolNode.prototype.type="SymbolNode",module.exports=SymbolNode},{"./Node":81}],84:[function(require,module,exports){var Node=require("./Node");function UnaryNode(op,argument){this.op=op,this.argument=argument}UnaryNode.prototype=Object.create(Node.prototype),UnaryNode.prototype.type="UnaryNode",module.exports=UnaryNode},{"./Node":81}],85:[function(require,module,exports){module.exports={ArrayNode:require("./ArrayNode"),AssignmentNode:require("./AssignmentNode"),BlockNode:require("./BlockNode"),ConditionalNode:require("./ConditionalNode"),ConstantNode:require("./ConstantNode"),FunctionNode:require("./FunctionNode"),Node:require("./Node"),OperatorNode:require("./OperatorNode"),SymbolNode:require("./SymbolNode"),UnaryNode:require("./UnaryNode")}},{"./ArrayNode":75,"./AssignmentNode":76,"./BlockNode":77,"./ConditionalNode":78,"./ConstantNode":79,"./FunctionNode":80,"./Node":81,"./OperatorNode":82,"./SymbolNode":83,"./UnaryNode":84}],86:[function(require,module,exports){module.exports={EOF:0,DELIMITER:1,NUMBER:2,STRING:3,SYMBOL:4}},{}],87:[function(require,module,exports){"use strict";var doubleBits=require("double-bits"),SMALLEST_DENORM=Math.pow(2,-1074),UINT_MAX=-1>>>0;function nextafter(x,y){if(isNaN(x)||isNaN(y))return NaN;if(x===y)return x;if(0===x)return y<0?-SMALLEST_DENORM:SMALLEST_DENORM;var hi=doubleBits.hi(x),lo=doubleBits.lo(x);return y>x==x>0?lo===-1>>>0?(hi+=1,lo=0):lo+=1:0===lo?(lo=-1>>>0,hi-=1):lo-=1,doubleBits.pack(lo,hi)}module.exports=nextafter},{"double-bits":30}],88:[function(require,module,exports){var process=module.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],89:[function(require,module,exports){var ua="undefined"!=typeof window?window.navigator.userAgent:"",isOSX=/OS X/.test(ua),isOpera=/Opera/.test(ua),maybeFirefox=!/like Gecko/.test(ua)&&!isOpera,i,output=module.exports={0:isOSX?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:isOSX?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:isOSX&&maybeFirefox?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:isOpera?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(i=58;i<65;++i)output[i]=String.fromCharCode(i);for(i=48;i<58;++i)output[i]=i-48+"";for(i=65;i<91;++i)output[i]=String.fromCharCode(i);for(i=96;i<106;++i)output[i]="<num-"+(i-96)+">";for(i=112;i<136;++i)output[i]="F"+(i-111)},{}],90:[function(require,module,exports){module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;function extend(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}},{}]},{},[1])(1)}));